2025-06-06 02:00:27,426 - app.services.db.conversation_service - INFO - Saving assistant message to conversation: 37ca91d1-0475-4685-9701-4ac30df842a2
2025-06-06 02:00:27,493 - app.services.db.conversation_service - INFO - Message saved with ID: 410d7dde-1bc8-4814-9e3c-625e42b9fe7c
2025-06-06 02:00:27,494 - app.main - INFO - Response status: 200
2025-06-06 02:01:04,648 - app.main - INFO - Request: POST /db/conversations/37ca91d1-0475-4685-9701-4ac30df842a2/messages
2025-06-06 02:01:04,897 - app.api.endpoints.db - INFO - API request to save message to conversation: 37ca91d1-0475-4685-9701-4ac30df842a2
2025-06-06 02:01:04,898 - app.services.db.conversation_service - INFO - Getting conversation: 37ca91d1-0475-4685-9701-4ac30df842a2
2025-06-06 02:01:05,055 - app.services.db.conversation_service - INFO - Retrieved conversation: 37ca91d1-0475-4685-9701-4ac30df842a2
2025-06-06 02:01:05,055 - app.services.db.conversation_service - INFO - Saving user message to conversation: 37ca91d1-0475-4685-9701-4ac30df842a2
2025-06-06 02:01:05,121 - app.services.db.conversation_service - INFO - Message saved with ID: 39b3472b-b9e1-4d0b-972a-821c151d2c05
2025-06-06 02:01:05,122 - app.main - INFO - Response status: 200
2025-06-06 02:01:05,212 - app.services.chains.workout_analysis_chain - INFO - Added workout data bundle to conversation context
2025-06-06 02:01:05,212 - app.services.chains.workout_analysis_chain - INFO - Bundle has 3 charts available
2025-06-06 02:01:05,212 - app.services.chains.workout_analysis_chain - INFO - Top strength performer: None
2025-06-06 02:01:05,212 - app.services.llm.workout_analysis - INFO - Added analysis bundle to conversation 37ca91d1-0475-4685-9701-4ac30df842a2
2025-06-06 02:01:05,214 - app.services.chains.base_conversation_chain - INFO - 
=== Formatted Messages ===
2025-06-06 02:01:05,214 - app.services.chains.base_conversation_chain - INFO - 
Message 1 (SystemMessage):
2025-06-06 02:01:05,214 - app.services.chains.base_conversation_chain - INFO - Content: 
Try to keep responses concise (under 100 tokens when possible) while still discussing the most relevant metrics. try and talk like a human fitness coach!


Current workout data context:
Available workout data:
            {
  "available_data": {
    "query": "Analyze progress for: Bench Press, Overhead Press, Incline Dumbbell Press, Tricep Dips",
    "date_range": {
      "start": "2025-03-28T16:51:04.357000+00:00",
      "end": "2025-06-06T00:56:57.962600+00:00"
    },
    "workout_metrics": {
      "exercise_progression": {
        "Barbell Bench Press": {
          "occurrences": 38,
          "first_date": "2025-03-28T16:51:04.357+00:00",
          "last_date": "2025-06-05T10:18:46.62358+00:00",
          "weight_progression": {
            "start": 95,
            "current": 90,
            "change": -5,
            "change_percent": -5.3
          },
          "volume_trend": "stable"
        },
        "Tricep Dips": {
          "occurrences": 66,
          "first_date": "2025-05-26T11:45:46.446271+00:00",
          "last_date": "2025-06-06T00:56:57.9626+00:00",
          "weight_progression": {
            "start": 0,
            "current": 0,
            "change": 0,
            "change_percent": 0
          },
          "volume_trend": "stable"
        },
        "Overhead Press": {
          "occurrences": 67,
          "first_date": "2025-05-26T11:45:46.446271+00:00",
          "last_date": "2025-06-06T00:56:57.9626+00:00",
          "weight_progression": {
            "start": 50,
            "current": 50,
            "change": 0,
            "change_percent": 0
          },
          "volume_trend": "stable"
        },
        "Incline Dumbbell Press": {
          "occurrences": 67,
          "first_date": "2025-05-26T11:45:46.446271+00:00",
          "last_date": "2025-06-06T00:56:57.9626+00:00",
          "weight_progression": {
            "start": 30,
            "current": 30,
            "change": 0,
            "change_percent": 0
          },
          "volume_trend": "stable"
        },
        "Bench Press": {
          "occurrences": 67,
          "first_date": "2025-05-26T11:45:46.446271+00:00",
          "last_date": "2025-06-06T00:56:57.9626+00:00",
          "weight_progression": {
            "start": 80,
            "current": 80,
            "change": 0,
            "change_percent": 0
          },
          "volume_trend": "stable"
        },
        "Dips": {
          "occurrences": 29,
          "first_date": "2025-04-07T15:18:47.869+00:00",
          "last_date": "2025-06-05T23:39:47.013619+00:00",
          "weight_progression": {
            "start": 95,
            "current": 95,
            "change": 0,
            "change_percent": 0
          },
          "volume_trend": "stable"
        }
      },
      "strength_progression": {},
      "most_improved_exercises": [],
      "workout_frequency": {
        "total_workouts": 123,
        "first_workout": "2025-03-28",
        "last_workout": "2025-06-06",
        "total_days": 70,
        "avg_days_between": 0.5,
        "workouts_per_week": 15.2,
        "consistency_score": {
          "score": 0,
          "streak": 31
        }
      }
    },
    "total_workouts": 123,
    "correlation_analysis": []
  }
}

Visualizations and metrics:

CHARTS:
Strength Progress Chart, Volume Progress Chart, Weekly Workout Frequency Chart

CONSISTENCY METRICS:
- Score: 0/100
- Current streak: 31 workouts
- Average frequency: Every 0.5 days

TOP PERFORMERS:
- Strength gains: No significant strength gains detected
- Volume increases: No significant volume increases detected
- Most frequent exercises: Not enough data

2025-06-06 02:01:05,214 - app.services.chains.base_conversation_chain - INFO - 
Message 2 (HumanMessage):
2025-06-06 02:01:05,214 - app.services.chains.base_conversation_chain - INFO - Content: Analyze this workout data
2025-06-06 02:01:05,214 - app.services.chains.base_conversation_chain - INFO - 
Message 3 (AIMessage):
2025-06-06 02:01:05,214 - app.services.chains.base_conversation_chain - INFO - Content: # Upper Body Progress Analysis

Looking at your chest and pushing exercises over the past couple months:

## Key Findings
- **Consistency is impressive!** You're working out about 15 times per week with a current 31-workout streak ðŸ’ª
- **Bench Press variations**: You're tracking both "Bench Press" (80 lbs) and "Barbell Bench Press" (down from 95 to 90 lbs)
- **Stable performance**: Most exercises show stable volume, but no significant progression in weights

## Exercise Notes
- **Overhead Press**: Maintained at 50 lbs consistently
- **Incline Dumbbell Press**: Holding steady at 30 lbs
- **Tricep Dips**: Regular bodyweight work

## Recommendations
1. Try progressive overload - increase weight by 2.5-5 lbs every 1-2 weeks
2. Consider periodization to break plateaus
3. Ensure you're allowing adequate recovery between pushing sessions

Need more focused strategies to drive strength gains in these movements?
2025-06-06 02:01:05,214 - app.services.chains.base_conversation_chain - INFO - 
Message 4 (HumanMessage):
2025-06-06 02:01:05,214 - app.services.chains.base_conversation_chain - INFO - Content: Analyze this workout data
2025-06-06 02:01:05,214 - app.services.chains.base_conversation_chain - INFO - =====================
2025-06-06 02:01:10,444 - app.main - INFO - Request: POST /db/conversations/37ca91d1-0475-4685-9701-4ac30df842a2/messages
2025-06-06 02:01:10,548 - app.api.endpoints.db - INFO - API request to save message to conversation: 37ca91d1-0475-4685-9701-4ac30df842a2
2025-06-06 02:01:10,549 - app.services.db.conversation_service - INFO - Getting conversation: 37ca91d1-0475-4685-9701-4ac30df842a2
2025-06-06 02:01:10,654 - app.services.db.conversation_service - INFO - Retrieved conversation: 37ca91d1-0475-4685-9701-4ac30df842a2
2025-06-06 02:01:10,655 - app.services.db.conversation_service - INFO - Saving assistant message to conversation: 37ca91d1-0475-4685-9701-4ac30df842a2
2025-06-06 02:01:10,707 - app.services.db.conversation_service - INFO - Message saved with ID: a2767794-f10a-451f-8673-6bfc8ba38516
2025-06-06 02:01:10,707 - app.main - INFO - Response status: 200
2025-06-06 02:01:24,662 - app.services.llm.workout_analysis - ERROR - Error in LLM websocket: (1012, None)
Traceback (most recent call last):
  File "/Users/mileshillary/Documents/supreme-octo-doodle/backend/app/services/llm/workout_analysis.py", line 56, in process_websocket
    data = await websocket.receive_json()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/mileshillary/Documents/supreme-octo-doodle/backend/venv/lib/python3.13/site-packages/starlette/websockets.py", line 135, in receive_json
    self._raise_on_disconnect(message)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/Users/mileshillary/Documents/supreme-octo-doodle/backend/venv/lib/python3.13/site-packages/starlette/websockets.py", line 113, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"], message.get("reason"))
starlette.websockets.WebSocketDisconnect: (1012, None)
2025-06-06 02:01:26,795 - app - INFO - Logging has been set up
2025-06-06 02:01:26,795 - app.main - INFO - Application starting
2025-06-06 02:01:26,795 - app.main - INFO - Loading .env from: /Users/mileshillary/Documents/supreme-octo-doodle/backend/app/.env (exists: False)
2025-06-06 02:01:26,795 - app.main - INFO - SUPABASE_URL present: True
2025-06-06 02:01:26,795 - app.main - INFO - SUPABASE_KEY present: True
2025-06-06 02:01:40,160 - app.main - INFO - Request: GET /db/conversations
2025-06-06 02:01:40,161 - app.core.supabase.client - INFO - Loading environment variables for Supabase client
2025-06-06 02:01:40,162 - app.core.supabase.client - INFO - Found .env at: /Users/mileshillary/Documents/supreme-octo-doodle/backend/.env
2025-06-06 02:01:40,162 - app.core.supabase.client - INFO - Supabase URL present: True
2025-06-06 02:01:40,162 - app.core.supabase.client - INFO - Supabase API key present: True
