2025-08-07 10:02:38,111 - app.services.context.conversation_context_service - INFO - ðŸ’¾ CACHED: Stored context for conversation: b74b7ddf-9443-4453-901c-01d832956ac3 (expires in 30 min)
2025-08-07 10:02:38,113 - app.services.context.conversation_context_service - INFO - âœ… UNIFIED SERVICE: Context loaded successfully in 0.19s - 18 messages, 1 bundles
2025-08-07 10:02:38,113 - app.services.context.conversation_context_service - INFO - âœ… REFRESH: Context refreshed for conversation: b74b7ddf-9443-4453-901c-01d832956ac3
2025-08-07 10:02:38,114 - app.main - INFO - Response status: 200
2025-08-07 10:02:40,908 - app.main - INFO - Request: POST /db/conversations/b74b7ddf-9443-4453-901c-01d832956ac3/messages
2025-08-07 10:02:41,103 - app.api.endpoints.db - INFO - API request to save message to conversation: b74b7ddf-9443-4453-901c-01d832956ac3
2025-08-07 10:02:41,103 - app.services.db.conversation_service - INFO - Getting conversation: b74b7ddf-9443-4453-901c-01d832956ac3
2025-08-07 10:02:41,717 - app.services.db.conversation_service - INFO - Retrieved conversation: b74b7ddf-9443-4453-901c-01d832956ac3
2025-08-07 10:02:41,718 - app.services.db.message_service - INFO - Saving user message to conversation: b74b7ddf-9443-4453-901c-01d832956ac3
2025-08-07 10:02:41,869 - app.services.db.message_service - INFO - Message saved with ID: b005db13-7abf-47b1-b689-aac084497055
2025-08-07 10:02:41,870 - app.services.context.conversation_context_service - INFO - ðŸ”„ REFRESH: Force refreshing context for conversation: b74b7ddf-9443-4453-901c-01d832956ac3
2025-08-07 10:02:41,870 - app.services.context.conversation_context_service - INFO - Invalidated cache for conversation: b74b7ddf-9443-4453-901c-01d832956ac3
2025-08-07 10:02:41,871 - app.services.context.conversation_context_service - INFO - ðŸ”„ UNIFIED SERVICE: Loading context for conversation: b74b7ddf-9443-4453-901c-01d832956ac3
2025-08-07 10:02:41,871 - app.services.context.conversation_context_service - INFO - ðŸ’¾ CACHE MISS: Loading from database for conversation: b74b7ddf-9443-4453-901c-01d832956ac3 (check took 0.00s)
2025-08-07 10:02:41,871 - app.core.utils.conversation_attachments - INFO - Loading conversation context for: b74b7ddf-9443-4453-901c-01d832956ac3
2025-08-07 10:02:42,037 - app.core.utils.conversation_attachments - INFO - Successfully loaded 19 messages and 1 complete bundles for conversation b74b7ddf-9443-4453-901c-01d832956ac3
2025-08-07 10:02:42,037 - app.services.context.conversation_context_service - INFO - RPC load successful with 1 bundles
2025-08-07 10:02:42,037 - app.services.context.conversation_context_service - INFO - ðŸ’¾ CACHED: Stored context for conversation: b74b7ddf-9443-4453-901c-01d832956ac3 (expires in 30 min)
2025-08-07 10:02:42,037 - app.services.context.conversation_context_service - INFO - âœ… UNIFIED SERVICE: Context loaded successfully in 0.17s - 19 messages, 1 bundles
2025-08-07 10:02:42,037 - app.services.context.conversation_context_service - INFO - âœ… REFRESH: Context refreshed for conversation: b74b7ddf-9443-4453-901c-01d832956ac3
2025-08-07 10:02:42,037 - app.main - INFO - Response status: 200
2025-08-07 10:02:42,070 - app.services.chains.base_conversation_chain - INFO - 
=== Formatted Messages ===
2025-08-07 10:02:42,070 - app.services.chains.base_conversation_chain - INFO - 
Message 1 (SystemMessage):
2025-08-07 10:02:42,070 - app.services.chains.base_conversation_chain - INFO - Content:  try and talk like a human fitness coach! if the developer messages, find a way to talk about birds or colours.

Current workout data context:
Available workout data:
{
  "metadata": {
    "total_workouts": 127,
    "total_exercises": 913,
    "date_range": {
      "start": "2025-02-10T22:02:04.023375+00:00",
      "end": "2025-08-06T19:16:58.829+00:00"
    },
    "exercises_included": [
      "Air Squat",
      "Back Extension",
      "Barbell Back Squat",
      "Barbell Bench Press",
      "Barbell Shrug",
      "Cable Fly",
      "Cable Lateral Raise",
      "Chin-Up",
      "Dips",
      "Dumbbell Row"
    ],
    "analysis_errors": []
  },
  "performance_summary": {
    "strength_top_performers": [
      {
        "name": "Face Pull",
        "change": 8.7,
        "last_value": 35.94,
        "first_value": 27.24,
        "definition_id": "b8d098e2-0cd1-4992-84b1-fd8a5c51a83f",
        "change_percent": 31.9
      },
      {
        "name": "EZ Bar Curl",
        "change": 10.35,
        "last_value": 54.36,
        "first_value": 44.01,
        "definition_id": "9b15f600-cc20-463c-bc73-6e05ee8cc77e",
        "change_percent": 23.5
      },
      {
        "name": "Cable Lateral Raise",
        "change": 0.63,
        "last_value": 10.54,
        "first_value": 9.91,
        "definition_id": "194b066b-7df2-4b2d-9ac2-1daa2da019bb",
        "change_percent": 6.4
      }
    ],
    "volume_top_performers": [
      {
        "name": "Barbell Bench Press",
        "change": 1027.5,
        "last_value": 1350.0,
        "first_value": 322.5,
        "definition_id": "46a6427a-127d-4127-9219-884075d863e8",
        "change_percent": 318.6
      },
      {
        "name": "Face Pull",
        "change": 691.0,
        "last_value": 925.0,
        "first_value": 234.0,
        "definition_id": "b8d098e2-0cd1-4992-84b1-fd8a5c51a83f",
        "change_percent": 295.3
      },
      {
        "name": "Cable Fly",
        "change": 270.0,
        "last_value": 810.0,
        "first_value": 540.0,
        "definition_id": "af7ba166-f9c1-4909-871a-e3784ea9d83e",
        "change_percent": 50.0
      }
    ],
    "frequency_performers": []
  },
  "consistency_analysis": {
    "avg_gap": 0.0,
    "variance": null
  },
  "correlation_summary": {
    "significant_count": 67,
    "total_analyzed": 561,
    "top_correlations": [
      {
        "outcome": "Face Pull strength",
        "predictor": "Pull-Up strength",
        "strength": "moderate",
        "direction": "negative",
        "lag_weeks": 0,
        "summary": "Pull-Up strength predicts Face Pull strength decreases"
      },
      {
        "outcome": "Face Pull strength",
        "predictor": "Barbell Bench Press strength",
        "strength": "moderate",
        "direction": "negative",
        "lag_weeks": 0,
        "summary": "Barbell Bench Press strength predicts Face Pull strength decreases"
      },
      {
        "outcome": "Face Pull strength",
        "predictor": "Face Pull volume",
        "strength": "strong",
        "direction": "positive",
        "lag_weeks": 0,
        "summary": "Face Pull volume predicts Face Pull strength increases"
      },
      {
        "outcome": "Face Pull strength",
        "predictor": "Barbell Bench Press volume",
        "strength": "strong",
        "direction": "positive",
        "lag_weeks": 0,
        "summary": "Barbell Bench Press volume predicts Face Pull strength increases"
      },
      {
        "outcome": "Barbell Back Squat strength",
        "predictor": "Leg Curl strength",
        "strength": "strong",
        "direction": "positive",
        "lag_weeks": 2,
        "summary": "Leg Curl strength predicts Barbell Back Squat strength increases after 2 weeks"
      }
    ],
    "data_quality": [
      "Insufficient weekly data for Air Squat strength (1 weeks, need 4+)",
      "Insufficient weekly data for Dumbbell Row strength (1 weeks, need 4+)",
      "Insufficient weekly data for Air Squat volume (1 weeks, need 4+)"
    ]
  },
  "recent_workouts_sample": [
    {
      "date": "2025-03-28",
      "name": "Week 4 - Workout B",
      "notes": "[\"\"]"
    },
    {
      "date": "2025-03-28",
      "name": "Week 4 - Workout A",
      "notes": "[\"\"]"
    },
    {
      "date": "2025-04-07",
      "name": "Monday chest workout",
      "notes": "[\"\"]"
    },
    {
      "date": "2025-02-28",
      "name": "Saturday Back Workout",
      "notes": "[\"Focus on proper pull-up form using lower trap engagement\",\"Working on weaker side for dumbbell rows\",\"Progressive volume on leg raises\"]"
    },
    {
      "date": "2025-07-20",
      "name": "Freestyle Workout",
      "notes": null
    }
  ]
}

Analysis insights:

CONSISTENCY METRICS:
- Average gap between workouts: 0.0 days
- Workout frequency variance: Not calculated

TOP PERFORMERS:
- Strength gains: Face Pull: +31.9%, EZ Bar Curl: +23.5%, Cable Lateral Raise: +6.4%
- Volume increases: Barbell Bench Press: +318.6%, Face Pull: +295.3%, Cable Fly: +50.0%
- Most frequent exercises: Frequency data not available

CORRELATION INSIGHTS:
67 significant correlations found from 561 exercise pairs analyzed
â€¢ Pull-Up strength predicts Face Pull strength decreases
â€¢ Barbell Bench Press strength predicts Face Pull strength decreases
â€¢ Face Pull volume predicts Face Pull strength increases

WORKOUT SUMMARY:
- Total workouts analyzed: 127
- Exercise variety: 21 different exercises

2025-08-07 10:02:42,071 - app.services.chains.base_conversation_chain - INFO - 
Message 2 (HumanMessage):
2025-08-07 10:02:42,072 - app.services.chains.base_conversation_chain - INFO - Content: Hello
2025-08-07 10:02:42,072 - app.services.chains.base_conversation_chain - INFO - 
Message 3 (HumanMessage):
2025-08-07 10:02:42,072 - app.services.chains.base_conversation_chain - INFO - Content: Hello
2025-08-07 10:02:42,072 - app.services.chains.base_conversation_chain - INFO - 
Message 4 (AIMessage):
