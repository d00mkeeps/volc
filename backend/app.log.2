2025-08-16 13:57:30,634 - app.services.db.workout_service - INFO - Retrieved 17 workouts for user: <app.core.supabase.auth.get_current_user.<locals>.User object at 0x12a37fb60>
2025-08-16 13:57:30,644 - app.main - INFO - Response status: 200
2025-08-16 13:58:25,419 - app.main - INFO - Request: POST /db/workouts
2025-08-16 13:58:25,425 - app.api.endpoints.db - INFO - API request to create workout: 
2025-08-16 13:58:25,426 - app.services.db.workout_service - INFO - Creating workout:  for user: 1b6aebb0-1107-42fc-97f2-892cc56b706b
2025-08-16 13:58:25,426 - app.services.db.workout_service - INFO - Inserting workout with data: 
2025-08-16 13:58:25,744 - app.services.db.workout_service - INFO - Workout created with ID: 28f72f21-6d12-45d0-b44d-b149d78c1fec
2025-08-16 13:58:25,745 - app.services.db.workout_service - INFO - Creating 2 exercises for workout: 28f72f21-6d12-45d0-b44d-b149d78c1fec
2025-08-16 13:58:25,745 - app.services.db.workout_service - INFO - Creating exercise 1/2: Barbell Skull Crusher
2025-08-16 13:58:25,832 - app.services.db.workout_service - INFO - Exercise created: Barbell Skull Crusher with ID: 67bb6d69-7ef7-4ed8-8294-586b06e44ea6
2025-08-16 13:58:26,046 - app.services.db.workout_service - INFO - Creating exercise 2/2: Preacher Curl
2025-08-16 13:58:26,125 - app.services.db.workout_service - INFO - Exercise created: Preacher Curl with ID: 69308013-95ca-4304-b9ec-8f81b8dd67ea
2025-08-16 13:58:26,639 - app.services.db.workout_service - INFO - Workout creation complete for ID: 28f72f21-6d12-45d0-b44d-b149d78c1fec
2025-08-16 13:58:26,640 - app.main - INFO - Response status: 200
2025-08-16 13:58:27,053 - app.main - INFO - Request: POST /api/workout-analysis
2025-08-16 13:58:27,056 - app.services.db.conversation_service - INFO - Creating conversation for user: 1b6aebb0-1107-42fc-97f2-892cc56b706b
2025-08-16 13:58:27,330 - app.services.workout_analysis_service - INFO - Conversation service returned: {'success': True, 'data': {'id': '959461a8-b16a-4284-9a79-459585cb4c62', 'user_id': '1b6aebb0-1107-42fc-97f2-892cc56b706b', 'title': 'Analysis - Aug 16', 'config_name': 'workout-analysis', 'created_at': '2025-08-16T12:58:27.329317+00:00', 'updated_at': '2025-08-16T12:58:27.329317+00:00', 'status': 'active', 'message_count': 0}, 'error': None}
2025-08-16 13:58:27,331 - app.services.workout_analysis_service - INFO - Starting analysis task for conversation: 959461a8-b16a-4284-9a79-459585cb4c62
2025-08-16 13:58:27,331 - app.services.db.analysis_service - INFO - Creating empty analysis bundle: 70187cf5-07a7-4d05-be37-219430d5b9d1 for conversation: 959461a8-b16a-4284-9a79-459585cb4c62
2025-08-16 13:58:27,599 - app.services.db.analysis_service - INFO - Empty bundle created successfully with ID: 70187cf5-07a7-4d05-be37-219430d5b9d1
2025-08-16 13:58:27,600 - app.services.workout_analysis_service - INFO - Created empty bundle: 70187cf5-07a7-4d05-be37-219430d5b9d1
2025-08-16 13:58:27,600 - app.services.db.analysis_service - INFO - Updating bundle 70187cf5-07a7-4d05-be37-219430d5b9d1 status to: in_progress
2025-08-16 13:58:27,889 - app.services.db.analysis_service - INFO - Bundle status updated successfully: 70187cf5-07a7-4d05-be37-219430d5b9d1 -> in_progress
2025-08-16 13:58:27,890 - app.services.db.workout_service - INFO - Calling RPC for user: 1b6aebb0-1107-42fc-97f2-892cc56b706b, definitions: ['bbb2acc5-935c-4fab-ab74-eabc6cf94eec', 'f42cf0c2-51cf-4e22-9b1c-d7b83f5c62fa']
2025-08-16 13:58:28,204 - app.services.db.workout_service - INFO - RPC returned: 11 workouts
2025-08-16 13:58:28,204 - app.services.workout_analysis_service - INFO - Processing analysis for 11 workouts
2025-08-16 13:58:28,205 - app.services.workout_analysis.main_processor - INFO - Processing bundle 70187cf5-07a7-4d05-be37-219430d5b9d1 with 11 workouts
2025-08-16 13:58:28,205 - app.services.workout_analysis.calc.strength - INFO - Found 4 exercises with strength data, returning top 3
2025-08-16 13:58:28,205 - app.services.workout_analysis.calc.strength - INFO - Generated time series for 4 exercises
2025-08-16 13:58:28,205 - app.services.workout_analysis.calc.volume - INFO - Found 4 exercises with volume data, returning top 3
2025-08-16 13:58:28,206 - app.services.workout_analysis.calc.volume - INFO - Generated time series for 4 exercises
2025-08-16 13:58:28,206 - app.services.workout_analysis.calc.consistency - INFO - Calculated consistency: avg_gap=0.1, variance=0.03026624904306909
2025-08-16 13:58:28,275 - app.services.workout_analysis.main_processor - INFO - Successfully processed bundle 70187cf5-07a7-4d05-be37-219430d5b9d1
2025-08-16 13:58:28,275 - app.services.db.analysis_service - INFO - Updating analysis bundle: 70187cf5-07a7-4d05-be37-219430d5b9d1
2025-08-16 13:58:28,525 - app.services.db.analysis_service - INFO - Bundle updated successfully: 70187cf5-07a7-4d05-be37-219430d5b9d1
2025-08-16 13:58:28,526 - app.services.workout_analysis_service - INFO - Analysis task completed successfully for conversation 959461a8-b16a-4284-9a79-459585cb4c62
2025-08-16 13:58:28,526 - app.main - INFO - Response status: 200
2025-08-16 13:58:39,481 - app.main - INFO - Request: POST /images/temp-upload
2025-08-16 13:58:39,486 - app.api.endpoints.images - INFO - User ID from endpoint: 1b6aebb0-1107-42fc-97f2-892cc56b706b
2025-08-16 13:58:39,486 - app.api.endpoints.images - INFO - User ID type: <class 'str'>
2025-08-16 13:58:39,486 - app.api.endpoints.images - INFO - JWT token length: 875
2025-08-16 13:58:39,486 - app.api.endpoints.images - INFO - JWT starts with: eyJhbGciOiJIUzI1NiIsImtpZCI6IlZxeno3RjFVNVFDSmkvN2...
2025-08-16 13:58:39,640 - app.api.endpoints.images - INFO - User client created successfully: True
2025-08-16 13:58:39,772 - app.api.endpoints.images - INFO - Test query successful: True
2025-08-16 13:58:39,773 - app.services.db.image_service - INFO - Creating temp image with path: 1b6aebb0-1107-42fc-97f2-892cc56b706b/7be07d04-b0c2-4853-8068-0c45617dbacb.png
2025-08-16 13:58:39,773 - app.services.db.image_service - INFO - User ID to insert: 1b6aebb0-1107-42fc-97f2-892cc56b706b (type: <class 'str'>)
2025-08-16 13:58:39,944 - app.services.db.image_service - INFO - About to insert: {'file_path': '1b6aebb0-1107-42fc-97f2-892cc56b706b/7be07d04-b0c2-4853-8068-0c45617dbacb.png', 'user_id': '1b6aebb0-1107-42fc-97f2-892cc56b706b', 'status': 'temporary', 'expires_at': '2025-08-17T12:58:39.944152'}
2025-08-16 13:58:40,089 - app.services.db.image_service - INFO - Created temp image record with ID: cd4f1e1e-eec4-42be-9e8a-5a6de8056910
2025-08-16 13:58:40,089 - app.services.db.image_service - INFO - About to create signed URL...
2025-08-16 13:58:40,343 - app.services.db.image_service - INFO - Signed URL response type: <class 'dict'>
2025-08-16 13:58:40,345 - app.services.db.image_service - INFO - Signed URL response: {'signed_url': 'https://sfniyudipwsaqwuhsdcq.supabase.co/storage/v1/object/upload/sign/images/1b6aebb0-1107-42fc-97f2-892cc56b706b/7be07d04-b0c2-4853-8068-0c45617dbacb.png?token=eyJraWQiOiJzdG9yYWdlLXVybC1zaWduaW5nLWtleV8wNDg3ODljNy1mYmQ1LTQ4OWQtYjVmNC03NjM1NWFhMDRhODYiLCJhbGciOiJIUzI1NiJ9.eyJvd25lciI6IjFiNmFlYmIwLTExMDctNDJmYy05N2YyLTg5MmNjNTZiNzA2YiIsInVybCI6ImltYWdlcy8xYjZhZWJiMC0xMTA3LTQyZmMtOTdmMi04OTJjYzU2YjcwNmIvN2JlMDdkMDQtYjBjMi00ODUzLTgwNjgtMGM0NTYxN2RiYWNiLnBuZyIsInVwc2VydCI6ZmFsc2UsImlhdCI6MTc1NTM0OTEyMCwiZXhwIjoxNzU1MzU2MzIwfQ.yO28wzmiRexf2UriYHhPv4rlIT40sjSELdb2_ONqNh8', 'signedUrl': 'https://sfniyudipwsaqwuhsdcq.supabase.co/storage/v1/object/upload/sign/images/1b6aebb0-1107-42fc-97f2-892cc56b706b/7be07d04-b0c2-4853-8068-0c45617dbacb.png?token=eyJraWQiOiJzdG9yYWdlLXVybC1zaWduaW5nLWtleV8wNDg3ODljNy1mYmQ1LTQ4OWQtYjVmNC03NjM1NWFhMDRhODYiLCJhbGciOiJIUzI1NiJ9.eyJvd25lciI6IjFiNmFlYmIwLTExMDctNDJmYy05N2YyLTg5MmNjNTZiNzA2YiIsInVybCI6ImltYWdlcy8xYjZhZWJiMC0xMTA3LTQyZmMtOTdmMi04OTJjYzU2YjcwNmIvN2JlMDdkMDQtYjBjMi00ODUzLTgwNjgtMGM0NTYxN2RiYWNiLnBuZyIsInVwc2VydCI6ZmFsc2UsImlhdCI6MTc1NTM0OTEyMCwiZXhwIjoxNzU1MzU2MzIwfQ.yO28wzmiRexf2UriYHhPv4rlIT40sjSELdb2_ONqNh8', 'token': 'eyJraWQiOiJzdG9yYWdlLXVybC1zaWduaW5nLWtleV8wNDg3ODljNy1mYmQ1LTQ4OWQtYjVmNC03NjM1NWFhMDRhODYiLCJhbGciOiJIUzI1NiJ9.eyJvd25lciI6IjFiNmFlYmIwLTExMDctNDJmYy05N2YyLTg5MmNjNTZiNzA2YiIsInVybCI6ImltYWdlcy8xYjZhZWJiMC0xMTA3LTQyZmMtOTdmMi04OTJjYzU2YjcwNmIvN2JlMDdkMDQtYjBjMi00ODUzLTgwNjgtMGM0NTYxN2RiYWNiLnBuZyIsInVwc2VydCI6ZmFsc2UsImlhdCI6MTc1NTM0OTEyMCwiZXhwIjoxNzU1MzU2MzIwfQ.yO28wzmiRexf2UriYHhPv4rlIT40sjSELdb2_ONqNh8', 'path': '1b6aebb0-1107-42fc-97f2-892cc56b706b/7be07d04-b0c2-4853-8068-0c45617dbacb.png'}
2025-08-16 13:58:40,345 - app.services.db.image_service - INFO - Successfully created upload URL
2025-08-16 13:58:40,345 - app.services.db.image_service - INFO - Returning response: {'image_id': 'cd4f1e1e-eec4-42be-9e8a-5a6de8056910', 'upload_url': 'https://sfniyudipwsaqwuhsdcq.supabase.co/storage/v1/object/upload/sign/images/1b6aebb0-1107-42fc-97f2-892cc56b706b/7be07d04-b0c2-4853-8068-0c45617dbacb.png?token=eyJraWQiOiJzdG9yYWdlLXVybC1zaWduaW5nLWtleV8wNDg3ODljNy1mYmQ1LTQ4OWQtYjVmNC03NjM1NWFhMDRhODYiLCJhbGciOiJIUzI1NiJ9.eyJvd25lciI6IjFiNmFlYmIwLTExMDctNDJmYy05N2YyLTg5MmNjNTZiNzA2YiIsInVybCI6ImltYWdlcy8xYjZhZWJiMC0xMTA3LTQyZmMtOTdmMi04OTJjYzU2YjcwNmIvN2JlMDdkMDQtYjBjMi00ODUzLTgwNjgtMGM0NTYxN2RiYWNiLnBuZyIsInVwc2VydCI6ZmFsc2UsImlhdCI6MTc1NTM0OTEyMCwiZXhwIjoxNzU1MzU2MzIwfQ.yO28wzmiRexf2UriYHhPv4rlIT40sjSELdb2_ONqNh8', 'file_path': '1b6aebb0-1107-42fc-97f2-892cc56b706b/7be07d04-b0c2-4853-8068-0c45617dbacb.png'}
2025-08-16 13:58:40,346 - app.main - INFO - Response status: 200
2025-08-16 13:58:46,651 - app.main - INFO - Request: GET /images/cd4f1e1e-eec4-42be-9e8a-5a6de8056910/url
2025-08-16 13:58:46,652 - app.api.endpoints.images - INFO - API request to get image URL: cd4f1e1e-eec4-42be-9e8a-5a6de8056910
2025-08-16 13:58:46,652 - app.services.db.image_service - INFO - Getting image URL for ID: cd4f1e1e-eec4-42be-9e8a-5a6de8056910
2025-08-16 13:58:46,905 - app.services.db.image_service - INFO - Found file path: 1b6aebb0-1107-42fc-97f2-892cc56b706b/7be07d04-b0c2-4853-8068-0c45617dbacb.png
