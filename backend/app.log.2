2025-08-11 17:53:33,018 - app.services.context.conversation_context_service - INFO - ðŸ”„ REFRESH: Force refreshing context for conversation: 89cd47b5-d90a-4e00-bd4a-86641de148b3
2025-08-11 17:53:33,021 - app.services.context.conversation_context_service - INFO - Invalidated cache for conversation: 89cd47b5-d90a-4e00-bd4a-86641de148b3
2025-08-11 17:53:33,021 - app.services.context.conversation_context_service - INFO - ðŸ”„ ADMIN: Loading context for conversation: 89cd47b5-d90a-4e00-bd4a-86641de148b3
2025-08-11 17:53:33,021 - app.services.context.conversation_context_service - INFO - ðŸ’¾ CACHE MISS: Loading from database with admin for conversation: 89cd47b5-d90a-4e00-bd4a-86641de148b3 (check took 0.00s)
2025-08-11 17:53:33,021 - app.core.utils.conversation_attachments - INFO - Loading conversation context (admin) for: 89cd47b5-d90a-4e00-bd4a-86641de148b3
2025-08-11 17:53:33,141 - app.core.utils.conversation_attachments - INFO - Successfully loaded 1 messages and 1 complete bundles for conversation 89cd47b5-d90a-4e00-bd4a-86641de148b3
2025-08-11 17:53:33,141 - app.services.context.conversation_context_service - INFO - ðŸ’¾ CACHED: Stored context for conversation: 89cd47b5-d90a-4e00-bd4a-86641de148b3 (expires in 30 min)
2025-08-11 17:53:33,141 - app.services.context.conversation_context_service - INFO - âœ… ADMIN: Context loaded successfully in 0.12s - 1 messages, 1 bundles
2025-08-11 17:53:33,141 - app.services.context.conversation_context_service - INFO - âœ… REFRESH: Context refreshed for conversation: 89cd47b5-d90a-4e00-bd4a-86641de148b3
2025-08-11 17:53:33,141 - app.services.llm.workout_analysis - INFO - Saved proactive AI message for conversation 89cd47b5-d90a-4e00-bd4a-86641de148b3
2025-08-11 17:54:12,631 - app.main - INFO - Request: POST /images/temp-upload
2025-08-11 17:54:12,633 - app.api.endpoints.images - INFO - User ID from endpoint: 1e2d6190-5d52-4f48-974c-7a5a43a50bf3
2025-08-11 17:54:12,633 - app.api.endpoints.images - INFO - User ID type: <class 'str'>
2025-08-11 17:54:12,634 - app.api.endpoints.images - INFO - JWT token length: 871
2025-08-11 17:54:12,634 - app.api.endpoints.images - INFO - JWT starts with: eyJhbGciOiJIUzI1NiIsImtpZCI6IlZxeno3RjFVNVFDSmkvN2...
2025-08-11 17:54:12,747 - app.api.endpoints.images - INFO - User client created successfully: True
2025-08-11 17:54:12,912 - app.api.endpoints.images - INFO - Test query successful: True
2025-08-11 17:54:12,912 - app.services.db.image_service - INFO - Creating temp image with path: 1e2d6190-5d52-4f48-974c-7a5a43a50bf3/d0be64ad-65d7-403d-8610-cae73e3718e5.jpg
2025-08-11 17:54:12,912 - app.services.db.image_service - INFO - User ID to insert: 1e2d6190-5d52-4f48-974c-7a5a43a50bf3 (type: <class 'str'>)
2025-08-11 17:54:13,280 - app.services.db.image_service - INFO - About to insert: {'file_path': '1e2d6190-5d52-4f48-974c-7a5a43a50bf3/d0be64ad-65d7-403d-8610-cae73e3718e5.jpg', 'user_id': '1e2d6190-5d52-4f48-974c-7a5a43a50bf3', 'status': 'temporary', 'expires_at': '2025-08-12T16:54:13.280432'}
2025-08-11 17:54:13,429 - app.services.db.image_service - INFO - Created temp image record with ID: a48793a6-83b9-4022-8bc3-2eb24c3348b4
2025-08-11 17:54:13,430 - app.services.db.image_service - INFO - About to create signed URL...
2025-08-11 17:54:13,753 - app.services.db.image_service - INFO - Signed URL response type: <class 'dict'>
2025-08-11 17:54:13,753 - app.services.db.image_service - INFO - Signed URL response: {'signed_url': 'https://sfniyudipwsaqwuhsdcq.supabase.co/storage/v1/object/upload/sign/images/1e2d6190-5d52-4f48-974c-7a5a43a50bf3/d0be64ad-65d7-403d-8610-cae73e3718e5.jpg?token=eyJraWQiOiJzdG9yYWdlLXVybC1zaWduaW5nLWtleV8wNDg3ODljNy1mYmQ1LTQ4OWQtYjVmNC03NjM1NWFhMDRhODYiLCJhbGciOiJIUzI1NiJ9.eyJvd25lciI6IjFlMmQ2MTkwLTVkNTItNGY0OC05NzRjLTdhNWE0M2E1MGJmMyIsInVybCI6ImltYWdlcy8xZTJkNjE5MC01ZDUyLTRmNDgtOTc0Yy03YTVhNDNhNTBiZjMvZDBiZTY0YWQtNjVkNy00MDNkLTg2MTAtY2FlNzNlMzcxOGU1LmpwZyIsInVwc2VydCI6ZmFsc2UsImlhdCI6MTc1NDkzMTI1MywiZXhwIjoxNzU0OTM4NDUzfQ.baBeKehlIowZAPCDEoJcXvFkY9Ado-6rqVMhD8NlpPA', 'signedUrl': 'https://sfniyudipwsaqwuhsdcq.supabase.co/storage/v1/object/upload/sign/images/1e2d6190-5d52-4f48-974c-7a5a43a50bf3/d0be64ad-65d7-403d-8610-cae73e3718e5.jpg?token=eyJraWQiOiJzdG9yYWdlLXVybC1zaWduaW5nLWtleV8wNDg3ODljNy1mYmQ1LTQ4OWQtYjVmNC03NjM1NWFhMDRhODYiLCJhbGciOiJIUzI1NiJ9.eyJvd25lciI6IjFlMmQ2MTkwLTVkNTItNGY0OC05NzRjLTdhNWE0M2E1MGJmMyIsInVybCI6ImltYWdlcy8xZTJkNjE5MC01ZDUyLTRmNDgtOTc0Yy03YTVhNDNhNTBiZjMvZDBiZTY0YWQtNjVkNy00MDNkLTg2MTAtY2FlNzNlMzcxOGU1LmpwZyIsInVwc2VydCI6ZmFsc2UsImlhdCI6MTc1NDkzMTI1MywiZXhwIjoxNzU0OTM4NDUzfQ.baBeKehlIowZAPCDEoJcXvFkY9Ado-6rqVMhD8NlpPA', 'token': 'eyJraWQiOiJzdG9yYWdlLXVybC1zaWduaW5nLWtleV8wNDg3ODljNy1mYmQ1LTQ4OWQtYjVmNC03NjM1NWFhMDRhODYiLCJhbGciOiJIUzI1NiJ9.eyJvd25lciI6IjFlMmQ2MTkwLTVkNTItNGY0OC05NzRjLTdhNWE0M2E1MGJmMyIsInVybCI6ImltYWdlcy8xZTJkNjE5MC01ZDUyLTRmNDgtOTc0Yy03YTVhNDNhNTBiZjMvZDBiZTY0YWQtNjVkNy00MDNkLTg2MTAtY2FlNzNlMzcxOGU1LmpwZyIsInVwc2VydCI6ZmFsc2UsImlhdCI6MTc1NDkzMTI1MywiZXhwIjoxNzU0OTM4NDUzfQ.baBeKehlIowZAPCDEoJcXvFkY9Ado-6rqVMhD8NlpPA', 'path': '1e2d6190-5d52-4f48-974c-7a5a43a50bf3/d0be64ad-65d7-403d-8610-cae73e3718e5.jpg'}
2025-08-11 17:54:13,753 - app.services.db.image_service - INFO - Successfully created upload URL
2025-08-11 17:54:13,754 - app.services.db.image_service - INFO - Returning response: {'image_id': 'a48793a6-83b9-4022-8bc3-2eb24c3348b4', 'upload_url': 'https://sfniyudipwsaqwuhsdcq.supabase.co/storage/v1/object/upload/sign/images/1e2d6190-5d52-4f48-974c-7a5a43a50bf3/d0be64ad-65d7-403d-8610-cae73e3718e5.jpg?token=eyJraWQiOiJzdG9yYWdlLXVybC1zaWduaW5nLWtleV8wNDg3ODljNy1mYmQ1LTQ4OWQtYjVmNC03NjM1NWFhMDRhODYiLCJhbGciOiJIUzI1NiJ9.eyJvd25lciI6IjFlMmQ2MTkwLTVkNTItNGY0OC05NzRjLTdhNWE0M2E1MGJmMyIsInVybCI6ImltYWdlcy8xZTJkNjE5MC01ZDUyLTRmNDgtOTc0Yy03YTVhNDNhNTBiZjMvZDBiZTY0YWQtNjVkNy00MDNkLTg2MTAtY2FlNzNlMzcxOGU1LmpwZyIsInVwc2VydCI6ZmFsc2UsImlhdCI6MTc1NDkzMTI1MywiZXhwIjoxNzU0OTM4NDUzfQ.baBeKehlIowZAPCDEoJcXvFkY9Ado-6rqVMhD8NlpPA', 'file_path': '1e2d6190-5d52-4f48-974c-7a5a43a50bf3/d0be64ad-65d7-403d-8610-cae73e3718e5.jpg'}
2025-08-11 17:54:13,754 - app.main - INFO - Response status: 200
2025-08-11 17:56:14,263 - app.services.llm.workout_analysis - ERROR - Error in LLM websocket: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')
Traceback (most recent call last):
  File "/Users/mileshillary/Desktop/learning/projects/volc/supreme-octo-doodle/backend/app/services/llm/workout_analysis.py", line 98, in process_websocket
    data = await websocket.receive_json()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/mileshillary/Desktop/learning/projects/volc/supreme-octo-doodle/.venv/lib/python3.13/site-packages/starlette/websockets.py", line 136, in receive_json
    self._raise_on_disconnect(message)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/Users/mileshillary/Desktop/learning/projects/volc/supreme-octo-doodle/.venv/lib/python3.13/site-packages/starlette/websockets.py", line 114, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"], message.get("reason"))
starlette.websockets.WebSocketDisconnect: (<CloseCode.ABNORMAL_CLOSURE: 1006>, '')
2025-08-11 20:10:20,076 - app - INFO - Logging has been set up
2025-08-11 20:10:20,076 - app.main - INFO - Application starting
2025-08-11 20:10:20,076 - app.main - INFO - Loading .env from: /Users/mileshillary/Desktop/learning/projects/volc/supreme-octo-doodle/backend/app/.env (exists: False)
2025-08-11 20:10:20,076 - app.main - INFO - SUPABASE_URL present: True
2025-08-11 20:10:20,076 - app.main - INFO - SUPABASE_KEY present: False
2025-08-11 20:14:22,765 - app.main - INFO - Request: GET /api/dashboard
2025-08-11 20:14:22,769 - app.main - INFO - Request: GET /db/user-profile
2025-08-11 20:14:22,771 - app.api.endpoints.db - INFO - API request to get profile for user: 1e2d6190-5d52-4f48-974c-7a5a43a50bf3
2025-08-11 20:14:22,771 - app.services.db.user_profile_service - INFO - Getting profile for user: 1e2d6190-5d52-4f48-974c-7a5a43a50bf3
2025-08-11 20:14:23,256 - app.services.db.user_profile_service - INFO - Successfully retrieved profile for user: 1e2d6190-5d52-4f48-974c-7a5a43a50bf3
2025-08-11 20:14:23,257 - app.main - INFO - Request: GET /db/exercise-definitions
2025-08-11 20:14:23,257 - app.main - INFO - Response status: 200
2025-08-11 20:14:23,258 - app.services.db.exercise_definition_service - INFO - Fetching all exercise definitions
2025-08-11 20:14:23,755 - app.services.db.exercise_definition_service - INFO - Fetched 167 exercise definitions
2025-08-11 20:14:23,762 - app.main - INFO - Response status: 200
2025-08-11 20:14:23,763 - app.main - INFO - Response status: 200
2025-08-11 20:14:24,172 - app.main - INFO - Request: GET /db/workouts/user
2025-08-11 20:14:24,173 - app.api.endpoints.db - INFO - API request to get all workouts for user: 1e2d6190-5d52-4f48-974c-7a5a43a50bf3
2025-08-11 20:14:24,173 - app.services.db.workout_service - INFO - Getting all workouts for user: <app.core.supabase.auth.get_current_user.<locals>.User object at 0x143d73770>
2025-08-11 20:14:24,616 - app.services.db.workout_service - INFO - Retrieved 48 workouts for user: <app.core.supabase.auth.get_current_user.<locals>.User object at 0x143d73770>
2025-08-11 20:14:24,627 - app.main - INFO - Response status: 200
2025-08-11 20:50:14,832 - app.main - INFO - Request: GET /api/dashboard
2025-08-11 20:50:14,844 - app.main - INFO - Request: GET /db/user-profile
2025-08-11 20:50:14,844 - app.main - INFO - Response status: 200
2025-08-11 20:50:14,849 - app.api.endpoints.db - INFO - API request to get profile for user: 1e2d6190-5d52-4f48-974c-7a5a43a50bf3
2025-08-11 20:50:14,849 - app.services.db.user_profile_service - INFO - Getting profile for user: 1e2d6190-5d52-4f48-974c-7a5a43a50bf3
2025-08-11 20:50:15,335 - app.services.db.user_profile_service - INFO - Successfully retrieved profile for user: 1e2d6190-5d52-4f48-974c-7a5a43a50bf3
2025-08-11 20:50:15,336 - app.main - INFO - Request: GET /db/exercise-definitions
