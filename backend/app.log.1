2025-02-26 16:26:06,982 - anthropic._base_client - DEBUG - Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': 'Hello! I was hoping we could look at some workout data!'}, {'role': 'assistant', 'content': "Hi! I'd be happy to help analyze your workout data. Currently, I don't see any workout information in the available data, but once you share some, I can help track progress, identify patterns, and provide specific insights about your training."}, {'role': 'user', 'content': 'Please show my bench press progress over the last month.'}, {'role': 'assistant', 'content': "I see your bench press data from Jan 27 to Feb 20, 2025! Here's the progress:\n\n- Starting 1RM: 111.99kg (100kg x 3 reps)\n- Latest 1RM: 131.59kg (117.5kg x 3 reps)\n- That's an impressive 19.6kg increase in your estimated 1RM!\n\nYou've consistently trained bench press with 11 sessions, showing steady progression in working weights from 100kg to 117.5kg for your 3-rep sets."}, {'role': 'user', 'content': 'What about bicep strength? Letâ€™s talk about my preacher curl progress.'}, {'role': 'assistant', 'content': "I see your preacher curl data from Jan 27 to Feb 20, 2025! Good progress:\n\n- Started at 37.5kg for 8 reps (46.95kg 1RM)\n- Latest lift: 45kg for 8 reps (56.35kg 1RM)\n- That's a 7.5kg increase in working weight over 8 sessions\n- Consistent 8-rep sets throughout\n- Steady progression, adding about 1kg per week\n\nKeep up the great bicep work! ðŸ’ª"}, {'role': 'user', 'content': 'Can we now talk about my leg curl and deadlift progress over the last 2 months?'}, {'role': 'assistant', 'content': "I don't see any leg curl or deadlift data in the available workout information. To analyze these exercises, I'd need:\n\n- Your leg curl and deadlift workout history\n- Weights, sets, and reps performed\n- Dates of workouts\n\nCurrently, I only have access to your recent preacher curl data."}, {'role': 'user', 'content': [{'type': 'text', 'text': 'How about now? Please let me know about my leg curl data. '}, {'type': 'text', 'text': 'How about now? Please let me know about my leg curl data. '}]}], 'model': 'claude-3-5-sonnet-20241022', 'stream': True, 'system': [{'type': 'text', 'text': "You are a workout analysis assistant with access to the user's workout data. When responding:\n1. Always check the available_data in your context first\n2. If you see ANY workout data, make sure you let the user know about it.\n3. Reference actual values from the data, such as:\n - Specific weights/1RMs achieved\n - Progress over time\n - Notable improvements or patterns\n4. Integrate graph data when available by discussing the trends shown\nFor example, if you see bench press data showing progression from 100kg to 110kg over 3 months, mention these specific numbers and the rate of improvement.\nIf no data is available for a specific query, then explain what data would be needed.\n\ntry to keep token output to a maximum of 100, and less if possible\n\nThe first message generally won't have workout data available, so just respond in a friendly, helpful manner."}, {'type': 'text', 'text': 'Current workout data context:\nAvailable workout data:\n            {\n  "available_data": {\n    "query": "How about now? Please let me know about my leg curl data. ",\n    "date_range": {\n      "start": "2025-01-27T22:02:04.023375+00:00",\n      "end": "2025-02-20T22:02:04.023375+00:00"\n    },\n    "exercises": {\n      "Leg Curl": [\n        {\n          "date": "2025-02-20T22:02:04.023375+00:00",\n          "metrics": {\n            "total_sets": 1,\n            "total_volume": 975.0,\n            "highest_1rm": 99.24\n          },\n          "sets": [\n            {\n              "weight": 65.0,\n              "reps": 15,\n              "estimated_1rm": 99.24\n            }\n          ]\n        },\n        {\n          "date": "2025-02-17T22:02:04.023375+00:00",\n          "metrics": {\n            "total_sets": 1,\n            "total_volume": 915.0,\n            "highest_1rm": 93.13\n          },\n          "sets": [\n            {\n              "weight": 61.0,\n              "reps": 15,\n              "estimated_1rm": 93.13\n            }\n          ]\n        },\n        {\n          "date": "2025-02-13T22:02:04.023375+00:00",\n          "metrics": {\n            "total_sets": 1,\n            "total_volume": 937.5,\n            "highest_1rm": 95.42\n          },\n          "sets": [\n            {\n              "weight": 62.5,\n              "reps": 15,\n              "estimated_1rm": 95.42\n            }\n          ]\n        },\n        {\n          "date": "2025-02-10T22:02:04.023375+00:00",\n          "metrics": {\n            "total_sets": 1,\n            "total_volume": 892.5,\n            "highest_1rm": 90.84\n          },\n          "sets": [\n            {\n              "weight": 59.5,\n              "reps": 15,\n              "estimated_1rm": 90.84\n            }\n          ]\n        },\n        {\n          "date": "2025-02-06T22:02:04.023375+00:00",\n          "metrics": {\n            "total_sets": 1,\n            "total_volume": 847.5,\n            "highest_1rm": 86.26\n          },\n          "sets": [\n            {\n              "weight": 56.5,\n              "reps": 15,\n              "estimated_1rm": 86.26\n            }\n          ]\n        },\n        {\n          "date": "2025-02-03T22:02:04.023375+00:00",\n          "metrics": {\n            "total_sets": 1,\n            "total_volume": 870.0,\n            "highest_1rm": 88.55\n          },\n          "sets": [\n            {\n              "weight": 58.0,\n              "reps": 15,\n              "estimated_1rm": 88.55\n            }\n          ]\n        },\n        {\n          "date": "2025-01-30T22:02:04.023375+00:00",\n          "metrics": {\n            "total_sets": 1,\n            "total_volume": 847.5,\n            "highest_1rm": 86.26\n          },\n          "sets": [\n            {\n              "weight": 56.5,\n              "reps": 15,\n              "estimated_1rm": 86.26\n            }\n          ]\n        },\n        {\n          "date": "2025-01-27T22:02:04.023375+00:00",\n          "metrics": {\n            "total_sets": 1,\n            "total_volume": 825.0,\n            "highest_1rm": 83.97\n          },\n          "sets": [\n            {\n              "weight": 55.0,\n              "reps": 15,\n              "estimated_1rm": 83.97\n            }\n          ]\n        }\n      ]\n    },\n    "total_workouts": 8\n  }\n}'}]}}
2025-02-26 16:26:06,986 - httpcore.connection - DEBUG - close.started
2025-02-26 16:26:06,986 - httpcore.connection - DEBUG - close.complete
2025-02-26 16:26:06,986 - httpcore.connection - DEBUG - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=None
2025-02-26 16:26:07,015 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x110042270>
2025-02-26 16:26:07,015 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x119f0e570> server_hostname='api.anthropic.com' timeout=None
2025-02-26 16:26:07,049 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x110042430>
2025-02-26 16:26:07,050 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-02-26 16:26:07,051 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-02-26 16:26:07,051 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-02-26 16:26:07,051 - httpcore.http11 - DEBUG - send_request_body.complete
2025-02-26 16:26:07,052 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-02-26 16:26:08,418 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 26 Feb 2025 16:26:08 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Cache-Control', b'no-cache'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'49'), (b'anthropic-ratelimit-requests-reset', b'2025-02-26T16:26:08Z'), (b'anthropic-ratelimit-input-tokens-limit', b'40000'), (b'anthropic-ratelimit-input-tokens-remaining', b'39000'), (b'anthropic-ratelimit-input-tokens-reset', b'2025-02-26T16:26:09Z'), (b'anthropic-ratelimit-output-tokens-limit', b'8000'), (b'anthropic-ratelimit-output-tokens-remaining', b'7000'), (b'anthropic-ratelimit-output-tokens-reset', b'2025-02-26T16:26:14Z'), (b'anthropic-ratelimit-tokens-limit', b'48000'), (b'anthropic-ratelimit-tokens-remaining', b'46000'), (b'anthropic-ratelimit-tokens-reset', b'2025-02-26T16:26:09Z'), (b'request-id', b'req_015iM9qDAGoLEa5K1vbMFqJi'), (b'anthropic-organization-id', b'59abe5d1-222f-4a4e-9568-afed04c257ac'), (b'via', b'1.1 google'), (b'cf-cache-status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'91814b829b70b3ae-MAN')])
2025-02-26 16:26:08,418 - httpx - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-02-26 16:26:08,418 - anthropic._base_client - DEBUG - HTTP Request: POST https://api.anthropic.com/v1/messages "200 OK"
2025-02-26 16:26:08,419 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-02-26 16:26:08,419 - app.services.chains.base_conversation_chain - INFO - Raw chunk from Anthropic: content='' additional_kwargs={} response_metadata={} id='run-d899a0e8-a1ae-4b69-87c6-e828d2c86c96' usage_metadata={'input_tokens': 1805, 'output_tokens': 1, 'total_tokens': 1806, 'input_token_details': {'cache_creation': 0, 'cache_read': 0}}
