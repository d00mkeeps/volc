2025-01-28 14:43:49,552 - app.services.conversation_service - DEBUG - Sent chunk: {'type': 'content', 'data': ' Raise\n    Sets'}
2025-01-28 14:43:49,582 - app.services.conversation_service - DEBUG - Sent chunk: {'type': 'content', 'data': ':\n    -'}
2025-01-28 14:43:49,622 - app.services.conversation_service - DEBUG - Sent chunk: {'type': 'content', 'data': ' 10 r'}
2025-01-28 14:43:49,643 - app.services.conversation_service - DEBUG - Sent chunk: {'type': 'content', 'data': 'eps x 18'}
2025-01-28 14:43:49,673 - app.services.conversation_service - DEBUG - Sent chunk: {'type': 'content', 'data': 'kg\n    -'}
2025-01-28 14:43:49,707 - app.services.conversation_service - DEBUG - Sent chunk: {'type': 'content', 'data': ' 12 r'}
2025-01-28 14:43:49,743 - app.services.conversation_service - DEBUG - Sent chunk: {'type': 'content', 'data': 'eps x 18'}
2025-01-28 14:43:49,767 - app.services.conversation_service - DEBUG - Sent chunk: {'type': 'content', 'data': 'kg\n    -'}
2025-01-28 14:43:49,794 - app.services.conversation_service - DEBUG - Sent chunk: {'type': 'content', 'data': ' 12 r'}
2025-01-28 14:43:49,828 - app.services.conversation_service - DEBUG - Sent chunk: {'type': 'content', 'data': 'eps x 18'}
2025-01-28 14:43:49,889 - app.services.conversation_service - DEBUG - Sent chunk: {'type': 'content', 'data': 'kg\n    '}
2025-01-28 14:43:49,950 - app.services.conversation_service - DEBUG - Sent chunk: {'type': 'content', 'data': '\nNotes:\n- You'}
2025-01-28 14:43:50,007 - app.services.conversation_service - DEBUG - Sent chunk: {'type': 'content', 'data': ' felt a'}
2025-01-28 14:43:50,043 - app.services.conversation_service - DEBUG - Sent chunk: {'type': 'content', 'data': ' little tired during this'}
2025-01-28 14:43:50,066 - app.services.conversation_service - DEBUG - Sent chunk: {'type': 'content', 'data': ' workout due'}
2025-01-28 14:43:50,112 - app.services.conversation_service - DEBUG - Sent chunk: {'type': 'content', 'data': ' to changing'}
2025-01-28 14:43:50,127 - app.services.conversation_service - DEBUG - Sent chunk: {'type': 'content', 'data': ' pre'}
2025-01-28 14:43:50,162 - app.services.conversation_service - DEBUG - Sent chunk: {'type': 'content', 'data': '-workout an'}
2025-01-28 14:43:50,195 - app.services.conversation_service - DEBUG - Sent chunk: {'type': 'content', 'data': 'd not sleeping well.'}
2025-01-28 14:43:50,227 - app.services.conversation_service - DEBUG - Sent chunk: {'type': 'content', 'data': '\n- Everything felt'}
2025-01-28 14:43:50,286 - app.services.conversation_service - DEBUG - Sent chunk: {'type': 'content', 'data': ' good, but'}
2025-01-28 14:43:50,348 - app.services.conversation_service - DEBUG - Sent chunk: {'type': 'content', 'data': ' you want to get'}
2025-01-28 14:43:50,374 - app.services.conversation_service - DEBUG - Sent chunk: {'type': 'content', 'data': ' back up to '}
2025-01-28 14:43:50,400 - app.services.conversation_service - DEBUG - Sent chunk: {'type': 'content', 'data': '12 reps'}
2025-01-28 14:43:50,451 - app.services.conversation_service - DEBUG - Sent chunk: {'type': 'content', 'data': ' on all exercises before'}
2025-01-28 14:43:50,475 - app.services.conversation_service - DEBUG - Sent chunk: {'type': 'content', 'data': ' increasing weight again.'}
2025-01-28 14:43:50,499 - app.services.conversation_service - DEBUG - Sent chunk: {'type': 'content', 'data': '\n- Ide'}
2025-01-28 14:43:50,533 - app.services.conversation_service - DEBUG - Sent chunk: {'type': 'content', 'data': 'ally this takes a'}
2025-01-28 14:43:50,558 - app.services.conversation_service - DEBUG - Sent chunk: {'type': 'content', 'data': ' week, but you'}
2025-01-28 14:43:50,594 - app.services.conversation_service - DEBUG - Sent chunk: {'type': 'content', 'data': "'re not in a"}
2025-01-28 14:43:50,649 - app.services.conversation_service - DEBUG - Sent chunk: {'type': 'content', 'data': ' rush given your cal'}
2025-01-28 14:43:50,683 - app.services.conversation_service - DEBUG - Sent chunk: {'type': 'content', 'data': 'oric deficit.'}
2025-01-28 14:43:50,746 - app.services.conversation_service - DEBUG - Sent chunk: {'type': 'content', 'data': '\n\nDoes this summary'}
2025-01-28 14:43:50,780 - app.services.conversation_service - DEBUG - Sent chunk: {'type': 'content', 'data': ' look'}
2025-01-28 14:43:50,821 - app.services.conversation_service - DEBUG - Sent chunk: {'type': 'content', 'data': ' correct?'}
2025-01-28 14:43:50,856 - app.services.conversation_service - DEBUG - Sent chunk: {'type': 'content', 'data': ''}
2025-01-28 14:43:50,883 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-01-28 14:43:50,884 - httpcore.http11 - DEBUG - response_closed.started
2025-01-28 14:43:50,884 - httpcore.http11 - DEBUG - response_closed.complete
2025-01-28 14:43:50,884 - app.services.chains.workout_chain - DEBUG - Response generated: Got it, no more exercises for this workout. Based on the details you provided:

Monday Workout
Exerc...
2025-01-28 14:43:50,885 - app.services.conversation_service - DEBUG - Sent chunk: {'type': 'done'}
2025-01-28 14:44:51,031 - app.services.conversation_service - DEBUG - Processing message: Looks good!...
2025-01-28 14:44:51,037 - app.services.chains.workout_chain - DEBUG - Processing message (attempt 1): Looks good!...
2025-01-28 14:44:51,042 - app.services.chains.workout_chain - DEBUG - Analyzing sentiment for current summary...
2025-01-28 14:44:51,057 - anthropic._base_client - DEBUG - Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': [{'type': 'text', 'text': "Last AI Message: Got it, no more exercises for this workout. Based on the details you provided:\n\nMonday Workout\nExercises:\n- Slight Incline Db Bench\n    Sets: \n    - 7 reps x 34kg\n    - 6 reps x 34kg  \n    - 6 reps x 34kg\n\n- Preacher Curl\n    Sets:\n    - 6 reps x 40kg\n    - 6 reps x 40kg\n    - 7 reps x 40kg\n    - 8 reps x 30kg  \n\n- Tricep Dips\n    Sets:\n    - 12 reps x Body Weight + 5kg\n    - 12 reps x Body Weight + 6.25kg\n    - 9 reps x Body Weight + 7.5kg\n    - 9 reps x Body Weight + 7.5kg\n\n- Upright Row  \n    Sets:\n    - 20 reps x 30kg\n    - 18 reps x 32.5kg\n    - 18 reps x 32.5kg\n\n- Tricep Pushdown\n    Sets: \n    - 10 reps x 30.6kg (2 sets)\n    - 8 reps x 30.6kg\n\n- Hammer Curls\n    Sets:\n    - 10 reps x 16kg\n    - 9 reps x 16kg \n    - 8 reps x 16kg\n\n- Cable Lateral Raise\n    Sets:\n    - 10 reps x 18kg\n    - 12 reps x 18kg\n    - 12 reps x 18kg\n    \nNotes:\n- You felt a little tired during this workout due to changing pre-workout and not sleeping well.\n- Everything felt good, but you want to get back up to 12 reps on all exercises before increasing weight again.\n- Ideally this takes a week, but you're not in a rush given your caloric deficit.\n\nDoes this summary look correct?\nUser Response: Looks good!\n\nOnly return APPROVE if both:\n1. The AI's last message contains a workout summary\n2. The user's response indicates approval"}, {'type': 'text', 'text': '{current_message}'}]}], 'model': 'claude-3-sonnet-20240229', 'stream': True, 'system': "Analyze if the user's response fully approves the summary or requests any changes.\nRules:\n- Return 'APPROVE' only if the response indicates complete acceptance\n- Return 'REJECT' if:\n  * Any changes are requested, even minor ones\n  * User seems unsure or asks questions\n  * User indicates any information is incorrect or missing\n  * User wants to add or modify any details"}}
2025-01-28 14:44:51,061 - httpcore.connection - DEBUG - close.started
2025-01-28 14:44:51,061 - httpcore.connection - DEBUG - close.complete
2025-01-28 14:44:51,061 - httpcore.connection - DEBUG - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=None
2025-01-28 14:44:51,115 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x12008e8a0>
2025-01-28 14:44:51,117 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x12005b550> server_hostname='api.anthropic.com' timeout=None
2025-01-28 14:44:51,182 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x120097140>
2025-01-28 14:44:51,183 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-01-28 14:44:51,183 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-01-28 14:44:51,183 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-01-28 14:44:51,183 - httpcore.http11 - DEBUG - send_request_body.complete
2025-01-28 14:44:51,183 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
