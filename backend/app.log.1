2024-11-22 13:37:17,264 - anthropic._base_client - DEBUG - Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': 'Summary: {\n  "trainingAge": "3 years",\n  "exercisePreferences": [\n    "powerlifting",\n    "running"\n  ],\n  "achievements": [\n    "170kg squat",\n    "105kg bench",\n    "185kg deadlift",\n    "27:00 5k"\n  ],\n  "medicalConsiderations": [\n    ""\n  ]\n}\n        Response: Looks good'}], 'model': 'claude-3-sonnet-20240229', 'stream': True, 'system': "Analyze if responses approve or reject summaries. Return only 'APPROVE' or 'REJECT'."}}
2024-11-22 13:37:17,266 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-11-22 13:37:17,267 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-11-22 13:37:17,267 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-11-22 13:37:17,267 - httpcore.http11 - DEBUG - send_request_body.complete
2024-11-22 13:37:17,267 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-11-22 13:37:17,783 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Fri, 22 Nov 2024 13:37:17 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Cache-Control', b'no-cache'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'48'), (b'anthropic-ratelimit-requests-reset', b'2024-11-22T13:37:19Z'), (b'anthropic-ratelimit-input-tokens-limit', b'40000'), (b'anthropic-ratelimit-input-tokens-remaining', b'40000'), (b'anthropic-ratelimit-input-tokens-reset', b'2024-11-22T13:37:17Z'), (b'anthropic-ratelimit-output-tokens-limit', b'8000'), (b'anthropic-ratelimit-output-tokens-remaining', b'7000'), (b'anthropic-ratelimit-output-tokens-reset', b'2024-11-22T13:37:25Z'), (b'anthropic-ratelimit-tokens-limit', b'48000'), (b'anthropic-ratelimit-tokens-remaining', b'47000'), (b'anthropic-ratelimit-tokens-reset', b'2024-11-22T13:37:17Z'), (b'request-id', b'req_01PCqn7QByUfbesxFVThEVXW'), (b'via', b'1.1 google'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8e6950338b232196-MAN')])
2024-11-22 13:37:17,785 - httpx - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-11-22 13:37:17,785 - anthropic._base_client - DEBUG - HTTP Request: POST https://api.anthropic.com/v1/messages "200 OK"
2024-11-22 13:37:17,785 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-11-22 13:37:17,794 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-11-22 13:37:17,795 - httpcore.http11 - DEBUG - response_closed.started
2024-11-22 13:37:17,795 - httpcore.http11 - DEBUG - response_closed.complete
2024-11-22 13:37:17,803 - anthropic._base_client - DEBUG - Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': 'Hi'}, {'role': 'assistant', 'content': "Hello there! I'm the TrainSmart AI coach. To get started, I'd love to learn a bit more about your fitness background. How long have you been regularly exercising or training? Whether it's a few months or several years, let me know your training age."}, {'role': 'user', 'content': 'I’ve been training about 3 years'}, {'role': 'assistant', 'content': 'Got it, thanks for sharing that. Next, what types of exercise do you typically enjoy or prefer? Things like weightlifting, running, yoga, team sports, etc. Let me know your favorite activities.'}, {'role': 'user', 'content': 'I mostly enjoy powerlifting with a bit of running '}, {'role': 'assistant', 'content': 'Good to know your preferences for powerlifting and running. Now, have you achieved any notable fitness or wellness goals recently? This could be things like lifting a personal best weight, completing a race, or reaching a target weight or body composition. If none come to mind, no worries!'}, {'role': 'user', 'content': '170, 105, 185 sbd with a 27:00 5k'}, {'role': 'assistant', 'content': 'Awesome, those are some great strength and running achievements you\'ve listed. One more question - do you have any medical considerations or limitations that impact your exercise routine? This could be things like injuries, conditions, etc. If not, just let me know "not provided".'}, {'role': 'user', 'content': 'Nope! I’m a healthy young man'}, {'role': 'assistant', 'content': 'Excellent, thanks for providing all that helpful background information. Let me summarize what I have:\n\nTraining Age: 3 years\nExercise Preferences: powerlifting, running\nAchievements: 170 lb bench, 105 lb overhead press, 185 lb squat, 27:00 5k \nMedical Considerations: not provided\n\nDoes this summary accurately capture your fitness background? If so, I have everything I need and we can proceed to personalizing your AI coaching experience. If you need to make any changes, just let me know.'}, {'role': 'user', 'content': 'Nope! Not quite right. '}, {'role': 'assistant', 'content': "No problem, let's go over it again to get it right. What needs to be corrected in the summary?"}, {'role': 'user', 'content': 'Those were my sbd numbers! And they’re in kg'}, {'role': 'assistant', 'content': 'Ah I see, my mistake on the units there. Let me update the summary:\n\nTraining Age: 3 years\nExercise Preferences: powerlifting, running  \nAchievements: 170kg bench, 105kg overhead press, 185kg squat, 27:00 5k\nMedical Considerations: not provided\n\nThank you for the clarification. Does this accurately summarize your training age, exercise preferences, notable achievements, and lack of medical considerations? I want to ensure I have the right information before moving forward.'}, {'role': 'user', 'content': 'Nope! '}, {'role': 'assistant', 'content': "Okay, let's take this step-by-step again. I clearly missed something in the summary. Could you please re-provide your:\n\nTraining age:\nExercise preferences: \nNotable achievements:\nMedical considerations:\n\nI want to make sure I accurately capture all the details before proceeding. Taking it one field at a time will help get this right."}, {'role': 'user', 'content': 'The only issue was in achievements; I squat 170kg, bench 105kg, and deadlift 185kg'}, {'role': 'assistant', 'content': 'Got it, thank you for the clarification. Here is the updated summary:\n\nTraining Age: 3 years\nExercise Preferences: powerlifting, running\nAchievements: 170kg squat, 105kg bench, 185kg deadlift, 27:00 5k\nMedical Considerations: not provided  \n\nPlease let me know if I have all the details correct this time regarding your training background. I want to make sure I summarize it properly before we move forward.'}, {'role': 'user', 'content': 'Looks good'}], 'model': 'claude-3-sonnet-20240229', 'stream': True, 'system': 'You are The TrainSmart coach designed to get background information from the user. Your goal is to learn about a user\'s:\n- Training age (how long they\'ve been exercising)\n- Exercise preferences and typical activities\n- Notable fitness/wellness achievements\n- Medical considerations that impact exercise\n\n<<RULES>>\n1. Don\'t exceed 120 tokens unless generating a summary for the user\n2. Maintain a friendly, conversational approach to gather this information. \n3. If the user doesn\'t provide information for any area, mark it as "not provided".\n4. Don\'t ask more than one field in a single message.\n\nWhen you have sufficient information, present a summary in EXACTLY this format:\n\nTraining Age: [specific duration, e.g., "3 years", "18 months", or "not provided"]\nExercise Preferences: [item 1], [item 2], [...] \nAchievements: [item 1], [item 2], [...] \nMedical Considerations: [item 1], [item 2], [...] or "not provided"\n\nEnd each line with a newline. Use commas to separate list items.\n\nAfter presenting the summary, ask if the information is accurate or if they would like to make any changes.\n\nIf they approve the summary, thank them and let them know we\'re ready to continue personalising their AI coaching experience.\n\nPrevious conversation: {history}\nHuman: {input}\nAssistant:'}}
2024-11-22 13:37:17,804 - anthropic._base_client - DEBUG - Sending HTTP Request: POST https://api.anthropic.com/v1/messages
2024-11-22 13:37:17,805 - httpcore.connection - DEBUG - connect_tcp.started host='api.anthropic.com' port=443 local_address=None timeout=None socket_options=None
2024-11-22 13:37:17,855 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x108ada3c0>
2024-11-22 13:37:17,855 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x108407b50> server_hostname='api.anthropic.com' timeout=None
2024-11-22 13:37:17,916 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x108ada0c0>
2024-11-22 13:37:17,916 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-11-22 13:37:17,916 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-11-22 13:37:17,916 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-11-22 13:37:17,917 - httpcore.http11 - DEBUG - send_request_body.complete
2024-11-22 13:37:17,917 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
