2025-08-15 14:45:55,067 - app.services.db.image_service - INFO - Successfully committed image: 2890551e-a4f8-4186-ab1e-de063b58ae8a
2025-08-15 14:45:55,071 - app.main - INFO - Response status: 200
2025-08-15 14:45:55,421 - app.main - INFO - Request: GET /db/workouts/templates
2025-08-15 14:45:55,423 - app.api.endpoints.db - INFO - API request to get workout templates for user: 1b6aebb0-1107-42fc-97f2-892cc56b706b
2025-08-15 14:45:55,424 - app.services.db.workout_service - INFO - Getting workout templates for user: <app.core.supabase.auth.get_current_user.<locals>.User object at 0x13d4aee40>
2025-08-15 14:45:56,095 - app.services.db.workout_service - INFO - Retrieved 5 templates for user: <app.core.supabase.auth.get_current_user.<locals>.User object at 0x13d4aee40>
2025-08-15 14:45:56,101 - app.main - INFO - Response status: 200
2025-08-15 14:45:56,548 - app.main - INFO - Request: GET /db/conversations/6ff776c4-ca19-4ab5-bea1-347b3b5ea5f2/messages
2025-08-15 14:45:56,549 - app.api.endpoints.db - INFO - API request to get messages for conversation: 6ff776c4-ca19-4ab5-bea1-347b3b5ea5f2
2025-08-15 14:45:56,549 - app.services.db.message_service - INFO - Getting messages for conversation: 6ff776c4-ca19-4ab5-bea1-347b3b5ea5f2
2025-08-15 14:45:57,155 - app.services.db.message_service - INFO - Retrieved 0 messages
2025-08-15 14:45:57,156 - app.main - INFO - Response status: 200
2025-08-15 14:45:57,157 - app.services.llm.workout_analysis - INFO - WebSocket connection accepted for conversation: 6ff776c4-ca19-4ab5-bea1-347b3b5ea5f2
2025-08-15 14:45:57,160 - app.services.llm.workout_analysis - INFO - Loading conversation context via unified service
2025-08-15 14:45:57,161 - app.services.context.conversation_context_service - INFO - ðŸ”„ ADMIN: Loading context for conversation: 6ff776c4-ca19-4ab5-bea1-347b3b5ea5f2
2025-08-15 14:45:57,161 - app.services.context.conversation_context_service - INFO - ðŸ’¾ CACHE MISS: Loading from database with admin for conversation: 6ff776c4-ca19-4ab5-bea1-347b3b5ea5f2 (check took 0.00s)
2025-08-15 14:45:57,161 - app.core.utils.conversation_attachments - INFO - Loading conversation context (admin) for: 6ff776c4-ca19-4ab5-bea1-347b3b5ea5f2
2025-08-15 14:45:57,473 - app.core.utils.conversation_attachments - INFO - Successfully loaded 0 messages and 1 complete bundles for conversation 6ff776c4-ca19-4ab5-bea1-347b3b5ea5f2
2025-08-15 14:45:57,473 - app.services.context.conversation_context_service - INFO - ðŸ’¾ CACHED: Stored context for conversation: 6ff776c4-ca19-4ab5-bea1-347b3b5ea5f2 (expires in 30 min)
2025-08-15 14:45:57,473 - app.services.context.conversation_context_service - INFO - âœ… ADMIN: Context loaded successfully in 0.31s - 0 messages, 1 bundles
2025-08-15 14:45:57,476 - app.services.chains.base_conversation_chain - INFO - Loaded 0 messages into conversation history
2025-08-15 14:45:57,476 - app.services.chains.workout_analysis_chain - INFO - Loaded 1 workout bundles into conversation context
2025-08-15 14:45:57,476 - app.services.llm.workout_analysis - INFO - New conversation with workout data - sending proactive analysis
2025-08-15 14:45:57,478 - app.services.chains.base_conversation_chain - INFO - 
=== Formatted Messages ===
2025-08-15 14:45:57,478 - app.services.chains.base_conversation_chain - INFO - 
Message 1 (SystemMessage):
2025-08-15 14:45:57,478 - app.services.chains.base_conversation_chain - INFO - Content: Try and talk like a human fitness coach! If the developer messages, find a way to talk about birds or colours.

Current workout data context:
Available workout data:
{
  "metadata": {
    "total_workouts": 5,
    "total_exercises": 13,
    "date_range": {
      "start": "2025-08-15T10:16:30.661+00:00",
      "end": "2025-08-15T13:45:21.748+00:00"
    },
    "exercises_included": [
      "Ab Wheel Rollout",
      "Arnold Press",
      "Barbell Hip Thrust",
      "Preacher Curl"
    ],
    "analysis_errors": []
  },
  "performance_summary": {
    "strength_top_performers": [
      {
        "name": "Barbell Hip Thrust",
        "change": 11.75,
        "last_value": 207.33,
        "first_value": 195.58,
        "definition_id": "cd7a616a-85b1-448f-8994-d3ed858b8742",
        "change_percent": 6.0
      },
      {
        "name": "Arnold Press",
        "change": 0.0,
        "last_value": 34.92,
        "first_value": 34.92,
        "definition_id": "0d669895-ab29-4a87-a293-99b77950a5c4",
        "change_percent": 0.0
      },
      {
        "name": "Preacher Curl",
        "change": 0.0,
        "last_value": 51.53,
        "first_value": 51.53,
        "definition_id": "f42cf0c2-51cf-4e22-9b1c-d7b83f5c62fa",
        "change_percent": 0.0
      }
    ],
    "volume_top_performers": [
      {
        "name": "Barbell Hip Thrust",
        "change": 3640.0,
        "last_value": 8680.0,
        "first_value": 5040.0,
        "definition_id": "cd7a616a-85b1-448f-8994-d3ed858b8742",
        "change_percent": 72.2
      },
      {
        "name": "Arnold Press",
        "change": 0.0,
        "last_value": 600.0,
        "first_value": 600.0,
        "definition_id": "0d669895-ab29-4a87-a293-99b77950a5c4",
        "change_percent": 0.0
      },
      {
        "name": "Preacher Curl",
        "change": 0.0,
        "last_value": 1950.0,
        "first_value": 1950.0,
        "definition_id": "f42cf0c2-51cf-4e22-9b1c-d7b83f5c62fa",
        "change_percent": 0.0
      }
    ],
    "frequency_performers": []
  },
  "consistency_analysis": {
    "avg_gap": 0.0,
    "variance": null
  },
  "correlation_summary": {
    "significant_count": 0,
    "total_analyzed": 0,
    "top_correlations": [],
    "data_quality": [
      "Insufficient weekly data for Arnold Press strength (1 weeks, need 4+)",
      "Insufficient weekly data for Preacher Curl strength (1 weeks, need 4+)",
      "Insufficient weekly data for Barbell Hip Thrust strength (1 weeks, need 4+)"
    ]
  },
  "recent_workouts_sample": [
    {
      "date": "2025-08-15",
      "name": "New workout name ",
      "notes": ""
    },
    {
      "date": "2025-08-15",
      "name": "Start Empty Workout",
      "notes": ""
    },
    {
      "date": "2025-08-15",
      "name": "New workout name ",
      "notes": ""
    },
    {
      "date": "2025-08-15",
      "name": "New workout name ",
      "notes": "Barbell Hip Thrust:\nNote\n\nAb Wheel Rollout:\nNote\n\nArnold Press:\nNote\n"
    },
    {
      "date": "2025-08-15",
      "name": ".",
      "notes": "Barbell Hip Thrust:\nGlute\n\nAb Wheel Rollout:\n\n"
    }
  ]
}

Analysis insights:

CONSISTENCY METRICS:
- Average gap between workouts: 0.0 days
- Workout frequency variance: Not calculated

TOP PERFORMERS:
- Strength gains: Barbell Hip Thrust: +6.0%
- Volume increases: Barbell Hip Thrust: +72.2%
- Most frequent exercises: Frequency data not available

CORRELATION INSIGHTS:
0 significant correlations found from 0 exercise pairs analyzed
â€¢ No correlation patterns detected

WORKOUT SUMMARY:
- Total workouts analyzed: 5
- Exercise variety: 4 different exercises

2025-08-15 14:45:57,478 - app.services.chains.base_conversation_chain - INFO - 
Message 2 (HumanMessage):
2025-08-15 14:45:57,478 - app.services.chains.base_conversation_chain - INFO - Content: Analyze my workout
2025-08-15 14:45:57,478 - app.services.chains.base_conversation_chain - INFO - =====================
2025-08-15 14:46:00,584 - app.services.chains.base_conversation_chain - INFO - Chunk: content='Alright, let's dive into your workout data and see what kind of awesome progress you're making! I'm pumped to look at this with you.

From what I'm seeing here, you've logged **5 workouts** today, all within a few hours on', metadata={'safety_ratings': [], 'usage_metadata': {}}
2025-08-15 14:46:00,885 - app.services.chains.base_conversation_chain - INFO - Chunk: content=' August 15th. That's some serious dedication to getting started! You've hit **4 different exercises**, which is a great start for variety.

Here's the breakdown:

### **Your Star Performer: Barbell Hip Thrust!**

*   **Strength Gains:** You've seen', metadata={'safety_ratings': [], 'usage_metadata': {}}
2025-08-15 14:46:01,266 - app.services.chains.base_conversation_chain - INFO - Chunk: content=' a fantastic **6% increase in strength** on your Barbell Hip Thrust, going from 195.58 to 207.33. That's awesome! Your glutes are definitely getting stronger.
*   **Volume Boost:** And check this out â€“ your **volume for Bar', metadata={'safety_ratings': [], 'usage_metadata': {}}
2025-08-15 14:46:01,810 - app.services.chains.base_conversation_chain - INFO - Chunk: content='bell Hip Thrust shot up by a massive 72.2%**! You're putting in the work, moving more weight for more reps, and that's exactly how you build those powerful glutes. Keep that up!

### **Solid Performance Elsewhere:**

*   You've also included **Arnold Press** and **', metadata={'safety_ratings': [], 'usage_metadata': {}}
2025-08-15 14:46:02,020 - app.services.chains.base_conversation_chain - INFO - Chunk: content='Preacher Curl** in your sessions, maintaining consistent performance there. That shows you're hitting different muscle groups and keeping things balanced.
*   And don't forget the **Ab Wheel Rollout** â€“ a fantastic core exercise!

### **Looking Ahead & Getting More Insights:**

Right now, all your workouts are', metadata={'safety_ratings': [], 'usage_metadata': {}}
2025-08-15 14:46:02,726 - app.services.chains.base_conversation_chain - INFO - Chunk: content=' logged on the same day, which is cool for a burst of activity! However, to really see your progress and get the best insights, we'll want to track your workouts over a longer period.

*   **Consistency is Key:** As you continue to log workouts over days, weeks, and months, we', metadata={'safety_ratings': [], 'usage_metadata': {}}
