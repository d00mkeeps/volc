2025-02-20 21:39:03,897 - app.api.endpoints.llm - INFO - WebSocket connection accepted
2025-02-20 21:39:03,906 - app.api.endpoints.llm - ERROR - Error in websocket handler: 1 validation error for ChatAnthropic
api_key
  Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
Traceback (most recent call last):
  File "/Users/mileshillary/Documents/supreme-octo-doodle/backend/app/api/endpoints/llm.py", line 66, in workout_analysis_websocket
    llm = ChatAnthropic(
        model="claude-3-5-sonnet-20241022",
        streaming=True,
        api_key=os.getenv("ANTHROPIC_API_KEY"),
    )
  File "/Users/mileshillary/Documents/supreme-octo-doodle/backend/venv/lib/python3.13/site-packages/langchain_core/load/serializable.py", line 125, in __init__
    super().__init__(*args, **kwargs)
    ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/Users/mileshillary/Documents/supreme-octo-doodle/backend/venv/lib/python3.13/site-packages/pydantic/main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
pydantic_core._pydantic_core.ValidationError: 1 validation error for ChatAnthropic
api_key
  Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
2025-02-20 21:39:04,441 - app.api.endpoints.llm - INFO - WebSocket connection request received for conversation: e50ed44b-09b5-4f04-855d-2d1b507e9180
2025-02-20 21:39:04,441 - app.api.endpoints.llm - INFO - WebSocket connection accepted
2025-02-20 21:39:04,442 - app.api.endpoints.llm - ERROR - Error in websocket handler: WorkoutChain.__init__() missing 1 required positional argument: 'api_key'
Traceback (most recent call last):
  File "/Users/mileshillary/Documents/supreme-octo-doodle/backend/app/api/endpoints/llm.py", line 35, in conversation_websocket
    service = ConversationService()  # Pass conversation_id
  File "/Users/mileshillary/Documents/supreme-octo-doodle/backend/app/services/conversation_service.py", line 10, in __init__
    self.reset_chain()
    ~~~~~~~~~~~~~~~~^^
  File "/Users/mileshillary/Documents/supreme-octo-doodle/backend/app/services/conversation_service.py", line 15, in reset_chain
    self.chain = WorkoutChain()
                 ~~~~~~~~~~~~^^
TypeError: WorkoutChain.__init__() missing 1 required positional argument: 'api_key'
2025-02-20 21:39:04,603 - app.api.endpoints.llm - INFO - WebSocket connection request received for workout analysis - user: None
2025-02-20 21:39:04,603 - app.api.endpoints.llm - INFO - WebSocket connection accepted
2025-02-20 21:39:04,604 - app.api.endpoints.llm - ERROR - Error in websocket handler: 1 validation error for ChatAnthropic
api_key
  Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
Traceback (most recent call last):
  File "/Users/mileshillary/Documents/supreme-octo-doodle/backend/app/api/endpoints/llm.py", line 66, in workout_analysis_websocket
    llm = ChatAnthropic(
        model="claude-3-5-sonnet-20241022",
        streaming=True,
        api_key=os.getenv("ANTHROPIC_API_KEY"),
    )
  File "/Users/mileshillary/Documents/supreme-octo-doodle/backend/venv/lib/python3.13/site-packages/langchain_core/load/serializable.py", line 125, in __init__
    super().__init__(*args, **kwargs)
    ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/Users/mileshillary/Documents/supreme-octo-doodle/backend/venv/lib/python3.13/site-packages/pydantic/main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
pydantic_core._pydantic_core.ValidationError: 1 validation error for ChatAnthropic
api_key
  Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
2025-02-20 21:40:02,335 - root - DEBUG - Logging has been set up
2025-02-20 21:40:02,336 - app.main - INFO - Application starting
2025-02-20 21:40:18,378 - app.api.endpoints.llm - INFO - WebSocket connection request received for workout analysis - user: None
2025-02-20 21:40:18,380 - app.api.endpoints.llm - INFO - WebSocket connection accepted
2025-02-20 21:40:18,386 - app.api.endpoints.llm - ERROR - Error in websocket handler: 1 validation error for ChatAnthropic
api_key
  Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
Traceback (most recent call last):
  File "/Users/mileshillary/Documents/supreme-octo-doodle/backend/app/api/endpoints/llm.py", line 67, in workout_analysis_websocket
    llm = ChatAnthropic(
        model="claude-3-5-sonnet-20241022",
        streaming=True,
        api_key=api_key,
    )
  File "/Users/mileshillary/Documents/supreme-octo-doodle/backend/venv/lib/python3.13/site-packages/langchain_core/load/serializable.py", line 125, in __init__
    super().__init__(*args, **kwargs)
    ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/Users/mileshillary/Documents/supreme-octo-doodle/backend/venv/lib/python3.13/site-packages/pydantic/main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
pydantic_core._pydantic_core.ValidationError: 1 validation error for ChatAnthropic
api_key
  Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
2025-02-20 21:40:18,990 - app.api.endpoints.llm - INFO - WebSocket connection request received for conversation: e50ed44b-09b5-4f04-855d-2d1b507e9180
2025-02-20 21:40:18,991 - app.api.endpoints.llm - INFO - WebSocket connection accepted
2025-02-20 21:40:18,992 - app.api.endpoints.llm - ERROR - Error in websocket handler: WorkoutChain.__init__() missing 1 required positional argument: 'api_key'
Traceback (most recent call last):
  File "/Users/mileshillary/Documents/supreme-octo-doodle/backend/app/api/endpoints/llm.py", line 35, in conversation_websocket
    service = ConversationService()  # Pass conversation_id
  File "/Users/mileshillary/Documents/supreme-octo-doodle/backend/app/services/conversation_service.py", line 10, in __init__
    self.reset_chain()
    ~~~~~~~~~~~~~~~~^^
  File "/Users/mileshillary/Documents/supreme-octo-doodle/backend/app/services/conversation_service.py", line 15, in reset_chain
    self.chain = WorkoutChain()
                 ~~~~~~~~~~~~^^
TypeError: WorkoutChain.__init__() missing 1 required positional argument: 'api_key'
2025-02-20 21:40:19,185 - app.api.endpoints.llm - INFO - WebSocket connection request received for conversation: e50ed44b-09b5-4f04-855d-2d1b507e9180
2025-02-20 21:40:19,185 - app.api.endpoints.llm - INFO - WebSocket connection accepted
2025-02-20 21:40:19,186 - app.api.endpoints.llm - ERROR - Error in websocket handler: WorkoutChain.__init__() missing 1 required positional argument: 'api_key'
Traceback (most recent call last):
  File "/Users/mileshillary/Documents/supreme-octo-doodle/backend/app/api/endpoints/llm.py", line 35, in conversation_websocket
    service = ConversationService()  # Pass conversation_id
  File "/Users/mileshillary/Documents/supreme-octo-doodle/backend/app/services/conversation_service.py", line 10, in __init__
    self.reset_chain()
    ~~~~~~~~~~~~~~~~^^
  File "/Users/mileshillary/Documents/supreme-octo-doodle/backend/app/services/conversation_service.py", line 15, in reset_chain
    self.chain = WorkoutChain()
                 ~~~~~~~~~~~~^^
TypeError: WorkoutChain.__init__() missing 1 required positional argument: 'api_key'
2025-02-20 21:40:19,345 - app.api.endpoints.llm - INFO - WebSocket connection request received for conversation: e50ed44b-09b5-4f04-855d-2d1b507e9180
2025-02-20 21:40:19,345 - app.api.endpoints.llm - INFO - WebSocket connection accepted
2025-02-20 21:40:19,347 - app.api.endpoints.llm - ERROR - Error in websocket handler: WorkoutChain.__init__() missing 1 required positional argument: 'api_key'
Traceback (most recent call last):
  File "/Users/mileshillary/Documents/supreme-octo-doodle/backend/app/api/endpoints/llm.py", line 35, in conversation_websocket
    service = ConversationService()  # Pass conversation_id
  File "/Users/mileshillary/Documents/supreme-octo-doodle/backend/app/services/conversation_service.py", line 10, in __init__
    self.reset_chain()
    ~~~~~~~~~~~~~~~~^^
  File "/Users/mileshillary/Documents/supreme-octo-doodle/backend/app/services/conversation_service.py", line 15, in reset_chain
    self.chain = WorkoutChain()
                 ~~~~~~~~~~~~^^
TypeError: WorkoutChain.__init__() missing 1 required positional argument: 'api_key'
