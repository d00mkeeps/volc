2024-12-04 15:07:20,482 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 04 Dec 2024 15:07:20 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Cache-Control', b'no-cache'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'49'), (b'anthropic-ratelimit-requests-reset', b'2024-12-04T15:07:20Z'), (b'anthropic-ratelimit-input-tokens-limit', b'40000'), (b'anthropic-ratelimit-input-tokens-remaining', b'38000'), (b'anthropic-ratelimit-input-tokens-reset', b'2024-12-04T15:07:22Z'), (b'anthropic-ratelimit-output-tokens-limit', b'8000'), (b'anthropic-ratelimit-output-tokens-remaining', b'7000'), (b'anthropic-ratelimit-output-tokens-reset', b'2024-12-04T15:07:27Z'), (b'anthropic-ratelimit-tokens-limit', b'48000'), (b'anthropic-ratelimit-tokens-remaining', b'45000'), (b'anthropic-ratelimit-tokens-reset', b'2024-12-04T15:07:22Z'), (b'request-id', b'req_01JrcjMkpMkM3EeMoz9JTTVE'), (b'via', b'1.1 google'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8eccb495fc33b3a8-MAN')])
2024-12-04 15:07:20,485 - httpx - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-12-04 15:07:20,486 - anthropic._base_client - DEBUG - HTTP Request: POST https://api.anthropic.com/v1/messages "200 OK"
2024-12-04 15:07:20,486 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-04 15:07:23,078 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-04 15:07:23,078 - httpcore.http11 - DEBUG - response_closed.started
2024-12-04 15:07:23,079 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-04 15:07:26,921 - app.services.onboarding_service - INFO - Received message: Looks good!
2024-12-04 15:07:26,929 - anthropic._base_client - DEBUG - Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': [{'type': 'text', 'text': 'Summary: {\n  "personalInfo": {\n    "firstName": "Miles",\n    "lastName": "Hillary",\n    "ageGroup": "18-24",\n    "preferredUnits": "metric"\n  },\n  "goal": "Add 50kg to powerlifting total by June 2025",\n  "fitnessBackground": {\n    "trainingAge": "3 years",\n    "exercisePreferences": [\n      "powerlifting",\n      "running"\n    ],\n    "currentAbilities": [\n      "Squat 170kg",\n      "Bench 105kg",\n      "Deadlift 185kg"\n    ],\n    "injuries": [\n      "recent cancer survivor"\n    ]\n  }\n}\n    User\'s Response: Looks good!'}, {'type': 'text', 'text': '{current_message}'}]}], 'model': 'claude-3-sonnet-20240229', 'stream': True, 'system': "Analyze if the user's response fully approves the summary or requests any changes.\nRules:\n- Return 'APPROVE' only if the response indicates complete acceptance\n- Return 'REJECT' if:\n  * Any changes are requested, even minor ones\n  * User seems unsure or asks questions\n  * User indicates any information is incorrect or missing\n  * User wants to add or modify any details"}}
2024-12-04 15:07:26,930 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-04 15:07:26,932 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-04 15:07:26,932 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-04 15:07:26,932 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-04 15:07:26,932 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-04 15:07:28,164 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 04 Dec 2024 15:07:28 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Cache-Control', b'no-cache'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'49'), (b'anthropic-ratelimit-requests-reset', b'2024-12-04T15:07:28Z'), (b'anthropic-ratelimit-input-tokens-limit', b'40000'), (b'anthropic-ratelimit-input-tokens-remaining', b'40000'), (b'anthropic-ratelimit-input-tokens-reset', b'2024-12-04T15:07:27Z'), (b'anthropic-ratelimit-output-tokens-limit', b'8000'), (b'anthropic-ratelimit-output-tokens-remaining', b'7000'), (b'anthropic-ratelimit-output-tokens-reset', b'2024-12-04T15:07:34Z'), (b'anthropic-ratelimit-tokens-limit', b'48000'), (b'anthropic-ratelimit-tokens-remaining', b'47000'), (b'anthropic-ratelimit-tokens-reset', b'2024-12-04T15:07:27Z'), (b'request-id', b'req_017hB3VDmPjYakysGEuZ8fAZ'), (b'via', b'1.1 google'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8eccb4c5da2ab3a8-MAN')])
2024-12-04 15:07:28,165 - httpx - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-12-04 15:07:28,166 - anthropic._base_client - DEBUG - HTTP Request: POST https://api.anthropic.com/v1/messages "200 OK"
2024-12-04 15:07:28,167 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-04 15:07:28,168 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-04 15:07:28,168 - httpcore.http11 - DEBUG - response_closed.started
2024-12-04 15:07:28,169 - httpcore.http11 - DEBUG - response_closed.complete
2024-12-04 15:07:28,174 - anthropic._base_client - DEBUG - Request options: {'method': 'post', 'url': '/v1/messages', 'files': None, 'json_data': {'max_tokens': 1024, 'messages': [{'role': 'user', 'content': [{'type': 'text', 'text': 'Summary: {\n  "personalInfo": {\n    "firstName": "Miles",\n    "lastName": "Hillary",\n    "ageGroup": "18-24",\n    "preferredUnits": "metric"\n  },\n  "goal": "Add 50kg to powerlifting total by June 2025",\n  "fitnessBackground": {\n    "trainingAge": "3 years",\n    "exercisePreferences": [\n      "powerlifting",\n      "running"\n    ],\n    "currentAbilities": [\n      "Squat 170kg",\n      "Bench 105kg",\n      "Deadlift 185kg"\n    ],\n    "injuries": [\n      "recent cancer survivor"\n    ]\n  }\n}\n    User\'s Response: Looks good!'}, {'type': 'text', 'text': '{current_message}'}]}], 'model': 'claude-3-sonnet-20240229', 'stream': True, 'system': "Analyze if the user's response fully approves the summary or requests any changes.\nRules:\n- Return 'APPROVE' only if the response indicates complete acceptance\n- Return 'REJECT' if:\n  * Any changes are requested, even minor ones\n  * User seems unsure or asks questions\n  * User indicates any information is incorrect or missing\n  * User wants to add or modify any details"}}
2024-12-04 15:07:28,175 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2024-12-04 15:07:28,176 - httpcore.http11 - DEBUG - send_request_headers.complete
2024-12-04 15:07:28,176 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2024-12-04 15:07:28,176 - httpcore.http11 - DEBUG - send_request_body.complete
2024-12-04 15:07:28,176 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2024-12-04 15:07:29,408 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Wed, 04 Dec 2024 15:07:29 GMT'), (b'Content-Type', b'text/event-stream; charset=utf-8'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'Cache-Control', b'no-cache'), (b'anthropic-ratelimit-requests-limit', b'50'), (b'anthropic-ratelimit-requests-remaining', b'49'), (b'anthropic-ratelimit-requests-reset', b'2024-12-04T15:07:29Z'), (b'anthropic-ratelimit-input-tokens-limit', b'40000'), (b'anthropic-ratelimit-input-tokens-remaining', b'40000'), (b'anthropic-ratelimit-input-tokens-reset', b'2024-12-04T15:07:28Z'), (b'anthropic-ratelimit-output-tokens-limit', b'8000'), (b'anthropic-ratelimit-output-tokens-remaining', b'7000'), (b'anthropic-ratelimit-output-tokens-reset', b'2024-12-04T15:07:36Z'), (b'anthropic-ratelimit-tokens-limit', b'48000'), (b'anthropic-ratelimit-tokens-remaining', b'47000'), (b'anthropic-ratelimit-tokens-reset', b'2024-12-04T15:07:28Z'), (b'request-id', b'req_01KVrWtB9T5WCz1L4U88c47J'), (b'via', b'1.1 google'), (b'CF-Cache-Status', b'DYNAMIC'), (b'X-Robots-Tag', b'none'), (b'Server', b'cloudflare'), (b'CF-RAY', b'8eccb4cdbc10b3a8-MAN')])
2024-12-04 15:07:29,409 - httpx - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2024-12-04 15:07:29,409 - anthropic._base_client - DEBUG - HTTP Request: POST https://api.anthropic.com/v1/messages "200 OK"
2024-12-04 15:07:29,410 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2024-12-04 15:07:29,418 - httpcore.http11 - DEBUG - receive_response_body.complete
2024-12-04 15:07:29,418 - httpcore.http11 - DEBUG - response_closed.started
2024-12-04 15:07:29,418 - httpcore.http11 - DEBUG - response_closed.complete
