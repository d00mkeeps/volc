2025-08-17 15:55:44,220 - app.services.db.workout_service - INFO - Creating 2 exercises for workout: eb4ce105-fb1c-47d3-be0d-4eb48519311d
2025-08-17 15:55:44,225 - app.services.db.workout_service - INFO - Creating exercise 1/2: Barbell Skull Crusher
2025-08-17 15:55:44,371 - app.services.db.workout_service - INFO - Exercise created: Barbell Skull Crusher with ID: baf8c1b5-39b5-4832-a343-466442424ed5
2025-08-17 15:55:44,663 - app.services.db.workout_service - INFO - Creating exercise 2/2: Preacher Curl
2025-08-17 15:55:44,772 - app.services.db.workout_service - INFO - Exercise created: Preacher Curl with ID: d5df4f9c-1431-4697-aa45-11c1d8bf949a
2025-08-17 15:55:46,074 - app.services.db.workout_service - INFO - Workout creation complete for ID: eb4ce105-fb1c-47d3-be0d-4eb48519311d
2025-08-17 15:55:46,076 - app.main - INFO - Response status: 200
2025-08-17 15:55:46,312 - app.main - INFO - Request: POST /api/workout-analysis
2025-08-17 15:55:46,321 - app.services.db.conversation_service - INFO - Creating conversation for user: 1b6aebb0-1107-42fc-97f2-892cc56b706b
2025-08-17 15:55:46,950 - app.services.workout_analysis_service - INFO - Conversation service returned: {'success': True, 'data': {'id': '39bda5e9-9502-43cd-a0cc-5fa80ea648b0', 'user_id': '1b6aebb0-1107-42fc-97f2-892cc56b706b', 'title': 'Analysis - Aug 17', 'config_name': 'workout-analysis', 'created_at': '2025-08-17T14:55:47.249734+00:00', 'updated_at': '2025-08-17T14:55:47.249734+00:00', 'status': 'active', 'message_count': 0}, 'error': None}
2025-08-17 15:55:46,951 - app.services.workout_analysis_service - INFO - Starting analysis task for conversation: 39bda5e9-9502-43cd-a0cc-5fa80ea648b0
2025-08-17 15:55:46,953 - app.services.db.analysis_service - INFO - Creating empty analysis bundle: 8d394d42-ea51-4c18-ad05-62df083f8b40 for conversation: 39bda5e9-9502-43cd-a0cc-5fa80ea648b0
2025-08-17 15:55:47,583 - app.services.db.analysis_service - INFO - Empty bundle created successfully with ID: 8d394d42-ea51-4c18-ad05-62df083f8b40
2025-08-17 15:55:47,585 - app.services.workout_analysis_service - INFO - Created empty bundle: 8d394d42-ea51-4c18-ad05-62df083f8b40
2025-08-17 15:55:47,585 - app.services.db.analysis_service - INFO - Updating bundle 8d394d42-ea51-4c18-ad05-62df083f8b40 status to: in_progress
2025-08-17 15:55:48,171 - app.services.db.analysis_service - INFO - Bundle status updated successfully: 8d394d42-ea51-4c18-ad05-62df083f8b40 -> in_progress
2025-08-17 15:55:48,171 - app.services.db.workout_service - INFO - Calling RPC for user: 1b6aebb0-1107-42fc-97f2-892cc56b706b, definitions: ['bbb2acc5-935c-4fab-ab74-eabc6cf94eec', 'f42cf0c2-51cf-4e22-9b1c-d7b83f5c62fa']
2025-08-17 15:55:48,743 - app.services.db.workout_service - INFO - RPC returned: 19 workouts
2025-08-17 15:55:48,743 - app.services.workout_analysis_service - INFO - Processing analysis for 19 workouts
2025-08-17 15:55:48,744 - app.services.workout_analysis.main_processor - INFO - Processing bundle 8d394d42-ea51-4c18-ad05-62df083f8b40 with 19 workouts
2025-08-17 15:55:48,746 - app.services.workout_analysis.calc.strength - INFO - Found 4 exercises with strength data, returning top 3
2025-08-17 15:55:48,746 - app.services.workout_analysis.calc.strength - INFO - Generated time series for 4 exercises
2025-08-17 15:55:48,747 - app.services.workout_analysis.calc.volume - INFO - Found 4 exercises with volume data, returning top 3
2025-08-17 15:55:48,747 - app.services.workout_analysis.calc.volume - INFO - Generated time series for 4 exercises
2025-08-17 15:55:48,747 - app.services.workout_analysis.calc.consistency - INFO - Calculated consistency: avg_gap=0.1, variance=0.04142880894688823
2025-08-17 15:55:48,895 - app.services.workout_analysis.main_processor - INFO - Successfully processed bundle 8d394d42-ea51-4c18-ad05-62df083f8b40
2025-08-17 15:55:48,895 - app.services.db.analysis_service - INFO - Updating analysis bundle: 8d394d42-ea51-4c18-ad05-62df083f8b40
2025-08-17 15:55:49,524 - app.services.db.analysis_service - INFO - Bundle updated successfully: 8d394d42-ea51-4c18-ad05-62df083f8b40
2025-08-17 15:55:49,546 - app.services.workout_analysis_service - INFO - Analysis task completed successfully for conversation 39bda5e9-9502-43cd-a0cc-5fa80ea648b0
2025-08-17 15:55:49,547 - app.main - INFO - Response status: 200
2025-08-17 15:55:49,714 - app.main - INFO - Request: GET /db/conversations/39bda5e9-9502-43cd-a0cc-5fa80ea648b0/messages
2025-08-17 15:55:49,717 - app.api.endpoints.db - INFO - API request to get messages for conversation: 39bda5e9-9502-43cd-a0cc-5fa80ea648b0
2025-08-17 15:55:49,717 - app.services.db.message_service - INFO - Getting messages for conversation: 39bda5e9-9502-43cd-a0cc-5fa80ea648b0
2025-08-17 15:55:50,356 - app.services.db.message_service - INFO - Retrieved 0 messages
2025-08-17 15:55:50,361 - app.main - INFO - Response status: 200
2025-08-17 15:55:50,366 - app.services.llm.workout_analysis - INFO - WebSocket connection accepted for conversation: 39bda5e9-9502-43cd-a0cc-5fa80ea648b0
2025-08-17 15:55:50,371 - app.services.llm.workout_analysis - INFO - Loading conversation context via unified service
2025-08-17 15:55:50,371 - app.services.context.conversation_context_service - INFO - ðŸ”„ ADMIN: Loading context for conversation: 39bda5e9-9502-43cd-a0cc-5fa80ea648b0
2025-08-17 15:55:50,371 - app.services.context.conversation_context_service - INFO - ðŸ’¾ CACHE MISS: Loading from database with admin for conversation: 39bda5e9-9502-43cd-a0cc-5fa80ea648b0 (check took 0.00s)
2025-08-17 15:55:50,372 - app.core.utils.conversation_attachments - INFO - Loading conversation context (admin) for: 39bda5e9-9502-43cd-a0cc-5fa80ea648b0
2025-08-17 15:55:50,685 - app.core.utils.conversation_attachments - INFO - Successfully loaded 0 messages and 1 complete bundles for conversation 39bda5e9-9502-43cd-a0cc-5fa80ea648b0
2025-08-17 15:55:50,685 - app.services.context.conversation_context_service - INFO - ðŸ’¾ CACHED: Stored context for conversation: 39bda5e9-9502-43cd-a0cc-5fa80ea648b0 (expires in 30 min)
2025-08-17 15:55:50,685 - app.services.context.conversation_context_service - INFO - âœ… ADMIN: Context loaded successfully in 0.31s - 0 messages, 1 bundles
2025-08-17 15:55:52,048 - app.services.chains.base_conversation_chain - INFO - Loaded 0 messages into conversation history
2025-08-17 15:55:52,048 - app.services.chains.workout_analysis_chain - INFO - Loaded 1 workout bundles into conversation context
2025-08-17 15:55:52,048 - app.services.llm.workout_analysis - INFO - New conversation with workout data - sending proactive analysis
2025-08-17 15:55:52,050 - app.services.chains.base_conversation_chain - INFO - 
=== Formatted Messages ===
2025-08-17 15:55:52,050 - app.services.chains.base_conversation_chain - INFO - 
Message 1 (SystemMessage):
