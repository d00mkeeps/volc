2025-08-18 17:02:19,924 - app.services.db.workout_service - INFO - Creating exercise 3/3: Running
2025-08-18 17:02:20,028 - app.services.db.workout_service - INFO - Exercise created: Running with ID: 8785870b-a4de-41c4-a3f3-0d00d552e9bc
2025-08-18 17:02:21,099 - app.services.db.workout_service - INFO - Updated bicep leaderboard for user 1b6aebb0-1107-42fc-97f2-892cc56b706b: 71.53 1RM
2025-08-18 17:02:21,099 - app.services.db.workout_service - INFO - Workout creation complete for ID: 15024c83-acc5-4cc0-bb56-273bb957f8a3
2025-08-18 17:02:21,099 - app.main - INFO - Response status: 200
2025-08-18 17:02:21,810 - app.main - INFO - Request: POST /api/workout-analysis
2025-08-18 17:02:21,814 - app.services.db.conversation_service - INFO - Creating conversation for user: 1b6aebb0-1107-42fc-97f2-892cc56b706b
2025-08-18 17:02:22,347 - app.services.workout_analysis_service - INFO - Conversation service returned: {'success': True, 'data': {'id': 'ba5ea40b-e394-4e60-b82a-79f1e8d70fc0', 'user_id': '1b6aebb0-1107-42fc-97f2-892cc56b706b', 'title': 'Analysis - Aug 18', 'config_name': 'workout-analysis', 'created_at': '2025-08-18T16:02:22.309786+00:00', 'updated_at': '2025-08-18T16:02:22.309786+00:00', 'status': 'active', 'message_count': 0}, 'error': None}
2025-08-18 17:02:22,348 - app.services.workout_analysis_service - INFO - Starting analysis task for conversation: ba5ea40b-e394-4e60-b82a-79f1e8d70fc0
2025-08-18 17:02:22,348 - app.services.db.analysis_service - INFO - Creating empty analysis bundle: 21685257-85b2-4e7f-843f-c6cc77ca1648 for conversation: ba5ea40b-e394-4e60-b82a-79f1e8d70fc0
2025-08-18 17:02:22,714 - app.services.db.analysis_service - INFO - Empty bundle created successfully with ID: 21685257-85b2-4e7f-843f-c6cc77ca1648
2025-08-18 17:02:22,714 - app.services.workout_analysis_service - INFO - Created empty bundle: 21685257-85b2-4e7f-843f-c6cc77ca1648
2025-08-18 17:02:22,714 - app.services.db.analysis_service - INFO - Updating bundle 21685257-85b2-4e7f-843f-c6cc77ca1648 status to: in_progress
2025-08-18 17:02:23,281 - app.services.db.analysis_service - INFO - Bundle status updated successfully: 21685257-85b2-4e7f-843f-c6cc77ca1648 -> in_progress
2025-08-18 17:02:23,282 - app.services.db.workout_service - INFO - Calling RPC for user: 1b6aebb0-1107-42fc-97f2-892cc56b706b, definitions: ['f42cf0c2-51cf-4e22-9b1c-d7b83f5c62fa', '46a6427a-127d-4127-9219-884075d863e8', 'e8f1f3a7-5443-42d3-8bd9-7dfadcfb29cc']
2025-08-18 17:02:23,718 - app.services.db.workout_service - INFO - RPC returned: 16 workouts
2025-08-18 17:02:23,718 - app.services.workout_analysis_service - INFO - Processing analysis for 16 workouts
2025-08-18 17:02:23,719 - app.services.workout_analysis.main_processor - INFO - Processing bundle 21685257-85b2-4e7f-843f-c6cc77ca1648 with 16 workouts
2025-08-18 17:02:23,719 - app.services.workout_analysis.calc.strength - INFO - Found 5 exercises with strength data, returning top 3
2025-08-18 17:02:23,720 - app.services.workout_analysis.calc.strength - INFO - Generated time series for 5 exercises
2025-08-18 17:02:23,720 - app.services.workout_analysis.calc.volume - INFO - Found 5 exercises with volume data, returning top 3
2025-08-18 17:02:23,720 - app.services.workout_analysis.calc.volume - INFO - Generated time series for 5 exercises
2025-08-18 17:02:23,720 - app.services.workout_analysis.calc.consistency - INFO - Calculated consistency: avg_gap=0.2, variance=0.08783494329608965
2025-08-18 17:02:23,780 - app.services.workout_analysis.main_processor - INFO - Successfully processed bundle 21685257-85b2-4e7f-843f-c6cc77ca1648
2025-08-18 17:02:23,780 - app.services.db.analysis_service - INFO - Updating analysis bundle: 21685257-85b2-4e7f-843f-c6cc77ca1648
2025-08-18 17:02:24,192 - app.services.db.analysis_service - INFO - Bundle updated successfully: 21685257-85b2-4e7f-843f-c6cc77ca1648
2025-08-18 17:02:24,200 - app.services.workout_analysis_service - INFO - Analysis task completed successfully for conversation ba5ea40b-e394-4e60-b82a-79f1e8d70fc0
2025-08-18 17:02:24,200 - app.main - INFO - Response status: 200
2025-08-18 17:02:24,474 - app.main - INFO - Request: GET /db/conversations/ba5ea40b-e394-4e60-b82a-79f1e8d70fc0/messages
2025-08-18 17:02:24,475 - app.api.endpoints.db - INFO - API request to get messages for conversation: ba5ea40b-e394-4e60-b82a-79f1e8d70fc0
2025-08-18 17:02:24,475 - app.services.db.message_service - INFO - Getting messages for conversation: ba5ea40b-e394-4e60-b82a-79f1e8d70fc0
2025-08-18 17:02:24,895 - app.services.db.message_service - INFO - Retrieved 0 messages
2025-08-18 17:02:24,897 - app.main - INFO - Response status: 200
2025-08-18 17:02:24,900 - app.services.llm.workout_analysis - INFO - WebSocket connection accepted for conversation: ba5ea40b-e394-4e60-b82a-79f1e8d70fc0
2025-08-18 17:02:24,901 - app.services.llm.workout_analysis - INFO - Loading conversation context via unified service
2025-08-18 17:02:24,901 - app.services.context.conversation_context_service - INFO - ðŸ”„ ADMIN: Loading context for conversation: ba5ea40b-e394-4e60-b82a-79f1e8d70fc0
2025-08-18 17:02:24,901 - app.services.context.conversation_context_service - INFO - ðŸ’¾ CACHE MISS: Loading from database with admin for conversation: ba5ea40b-e394-4e60-b82a-79f1e8d70fc0 (check took 0.00s)
2025-08-18 17:02:24,901 - app.core.utils.conversation_attachments - INFO - Loading conversation context (admin) for: ba5ea40b-e394-4e60-b82a-79f1e8d70fc0
2025-08-18 17:02:25,104 - app.core.utils.conversation_attachments - INFO - Successfully loaded 0 messages and 1 complete bundles for conversation ba5ea40b-e394-4e60-b82a-79f1e8d70fc0
2025-08-18 17:02:25,105 - app.services.context.conversation_context_service - INFO - ðŸ’¾ CACHED: Stored context for conversation: ba5ea40b-e394-4e60-b82a-79f1e8d70fc0 (expires in 30 min)
2025-08-18 17:02:25,105 - app.services.context.conversation_context_service - INFO - âœ… ADMIN: Context loaded successfully in 0.20s - 0 messages, 1 bundles
2025-08-18 17:02:26,256 - app.services.chains.base_conversation_chain - INFO - Loaded 0 messages into conversation history
2025-08-18 17:02:26,256 - app.services.chains.workout_analysis_chain - INFO - Loaded 1 workout bundles into conversation context
2025-08-18 17:02:26,256 - app.services.llm.workout_analysis - INFO - New conversation with workout data - sending proactive analysis
2025-08-18 17:02:26,257 - app.services.chains.base_conversation_chain - INFO - 
=== Formatted Messages ===
2025-08-18 17:02:26,257 - app.services.chains.base_conversation_chain - INFO - 
Message 1 (SystemMessage):
