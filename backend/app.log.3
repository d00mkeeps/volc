2025-08-11 17:42:06,630 - app.services.workout_analysis_service - INFO - Conversation service returned: {'success': True, 'data': {'id': 'a38c6c90-d449-47ac-ac2d-1d3c8006e5a3', 'user_id': '1e2d6190-5d52-4f48-974c-7a5a43a50bf3', 'title': 'Analysis - Aug 11', 'config_name': 'workout-analysis', 'created_at': '2025-08-11T16:42:06.613469+00:00', 'updated_at': '2025-08-11T16:42:06.613469+00:00', 'status': 'active', 'message_count': 0}, 'error': None}
2025-08-11 17:42:06,634 - app.services.workout_analysis_service - INFO - Starting analysis task for conversation: a38c6c90-d449-47ac-ac2d-1d3c8006e5a3
2025-08-11 17:42:06,634 - app.services.db.analysis_service - INFO - Creating empty analysis bundle: d4917a53-1de1-4c5e-919d-0059d6f57aa4 for conversation: a38c6c90-d449-47ac-ac2d-1d3c8006e5a3
2025-08-11 17:42:07,237 - app.services.db.analysis_service - INFO - Empty bundle created successfully with ID: d4917a53-1de1-4c5e-919d-0059d6f57aa4
2025-08-11 17:42:07,238 - app.services.workout_analysis_service - INFO - Created empty bundle: d4917a53-1de1-4c5e-919d-0059d6f57aa4
2025-08-11 17:42:07,238 - app.services.db.analysis_service - INFO - Updating bundle d4917a53-1de1-4c5e-919d-0059d6f57aa4 status to: in_progress
2025-08-11 17:42:07,515 - app.services.db.analysis_service - INFO - Bundle status updated successfully: d4917a53-1de1-4c5e-919d-0059d6f57aa4 -> in_progress
2025-08-11 17:42:07,515 - app.services.db.workout_service - INFO - Calling RPC for user: 1e2d6190-5d52-4f48-974c-7a5a43a50bf3, definitions: ['e8f1f3a7-5443-42d3-8bd9-7dfadcfb29cc']
2025-08-11 17:42:07,800 - app.services.db.workout_service - INFO - RPC returned: 5 workouts
2025-08-11 17:42:07,800 - app.services.workout_analysis_service - INFO - Processing analysis for 5 workouts
2025-08-11 17:42:07,801 - app.services.workout_analysis.main_processor - INFO - Processing bundle d4917a53-1de1-4c5e-919d-0059d6f57aa4 with 5 workouts
2025-08-11 17:42:07,801 - app.services.workout_analysis.calc.strength - INFO - Found 3 exercises with strength data, returning top 3
2025-08-11 17:42:07,801 - app.services.workout_analysis.calc.strength - INFO - Generated time series for 3 exercises
2025-08-11 17:42:07,801 - app.services.workout_analysis.calc.volume - INFO - Found 3 exercises with volume data, returning top 3
2025-08-11 17:42:07,801 - app.services.workout_analysis.calc.volume - INFO - Generated time series for 3 exercises
2025-08-11 17:42:07,801 - app.services.workout_analysis.calc.consistency - INFO - Calculated consistency: avg_gap=0.5, variance=0.27283156852676155
2025-08-11 17:42:07,825 - app.services.workout_analysis.main_processor - INFO - Successfully processed bundle d4917a53-1de1-4c5e-919d-0059d6f57aa4
2025-08-11 17:42:07,825 - app.services.db.analysis_service - INFO - Updating analysis bundle: d4917a53-1de1-4c5e-919d-0059d6f57aa4
2025-08-11 17:42:08,161 - app.services.db.analysis_service - INFO - Bundle updated successfully: d4917a53-1de1-4c5e-919d-0059d6f57aa4
2025-08-11 17:42:08,161 - app.services.workout_analysis_service - INFO - Analysis task completed successfully for conversation a38c6c90-d449-47ac-ac2d-1d3c8006e5a3
2025-08-11 17:42:08,162 - app.main - INFO - Response status: 200
2025-08-11 17:42:08,338 - app.main - INFO - Request: POST /images/temp-upload
2025-08-11 17:42:08,341 - app.api.endpoints.images - INFO - User ID from endpoint: 1e2d6190-5d52-4f48-974c-7a5a43a50bf3
2025-08-11 17:42:08,342 - app.api.endpoints.images - INFO - User ID type: <class 'str'>
2025-08-11 17:42:08,342 - app.api.endpoints.images - INFO - JWT token length: 871
2025-08-11 17:42:08,342 - app.api.endpoints.images - INFO - JWT starts with: eyJhbGciOiJIUzI1NiIsImtpZCI6IlZxeno3RjFVNVFDSmkvN2...
2025-08-11 17:42:08,485 - app.api.endpoints.images - INFO - User client created successfully: True
2025-08-11 17:42:08,595 - app.api.endpoints.images - INFO - Test query successful: True
2025-08-11 17:42:08,595 - app.services.db.image_service - INFO - Creating temp image with path: 1e2d6190-5d52-4f48-974c-7a5a43a50bf3/36bd543a-9785-4940-ae56-ce47d5e1d6c3.jpg
2025-08-11 17:42:08,595 - app.services.db.image_service - INFO - User ID to insert: 1e2d6190-5d52-4f48-974c-7a5a43a50bf3 (type: <class 'str'>)
2025-08-11 17:42:08,720 - app.services.db.image_service - INFO - About to insert: {'file_path': '1e2d6190-5d52-4f48-974c-7a5a43a50bf3/36bd543a-9785-4940-ae56-ce47d5e1d6c3.jpg', 'user_id': '1e2d6190-5d52-4f48-974c-7a5a43a50bf3', 'status': 'temporary', 'expires_at': '2025-08-12T16:42:08.720858'}
2025-08-11 17:42:08,879 - app.services.db.image_service - INFO - Created temp image record with ID: 065ac9dc-8359-4009-b6c4-4146be6adf76
2025-08-11 17:42:08,879 - app.services.db.image_service - INFO - About to create signed URL...
2025-08-11 17:42:09,062 - app.services.db.image_service - INFO - Signed URL response type: <class 'dict'>
2025-08-11 17:42:09,062 - app.services.db.image_service - INFO - Signed URL response: {'signed_url': 'https://sfniyudipwsaqwuhsdcq.supabase.co/storage/v1/object/upload/sign/images/1e2d6190-5d52-4f48-974c-7a5a43a50bf3/36bd543a-9785-4940-ae56-ce47d5e1d6c3.jpg?token=eyJraWQiOiJzdG9yYWdlLXVybC1zaWduaW5nLWtleV8wNDg3ODljNy1mYmQ1LTQ4OWQtYjVmNC03NjM1NWFhMDRhODYiLCJhbGciOiJIUzI1NiJ9.eyJvd25lciI6IjFlMmQ2MTkwLTVkNTItNGY0OC05NzRjLTdhNWE0M2E1MGJmMyIsInVybCI6ImltYWdlcy8xZTJkNjE5MC01ZDUyLTRmNDgtOTc0Yy03YTVhNDNhNTBiZjMvMzZiZDU0M2EtOTc4NS00OTQwLWFlNTYtY2U0N2Q1ZTFkNmMzLmpwZyIsInVwc2VydCI6ZmFsc2UsImlhdCI6MTc1NDkzMDUyOSwiZXhwIjoxNzU0OTM3NzI5fQ.mRQA6wOnZ4eexH94MzAKR2r-VRqhz3_GKnXeMCs2_zY', 'signedUrl': 'https://sfniyudipwsaqwuhsdcq.supabase.co/storage/v1/object/upload/sign/images/1e2d6190-5d52-4f48-974c-7a5a43a50bf3/36bd543a-9785-4940-ae56-ce47d5e1d6c3.jpg?token=eyJraWQiOiJzdG9yYWdlLXVybC1zaWduaW5nLWtleV8wNDg3ODljNy1mYmQ1LTQ4OWQtYjVmNC03NjM1NWFhMDRhODYiLCJhbGciOiJIUzI1NiJ9.eyJvd25lciI6IjFlMmQ2MTkwLTVkNTItNGY0OC05NzRjLTdhNWE0M2E1MGJmMyIsInVybCI6ImltYWdlcy8xZTJkNjE5MC01ZDUyLTRmNDgtOTc0Yy03YTVhNDNhNTBiZjMvMzZiZDU0M2EtOTc4NS00OTQwLWFlNTYtY2U0N2Q1ZTFkNmMzLmpwZyIsInVwc2VydCI6ZmFsc2UsImlhdCI6MTc1NDkzMDUyOSwiZXhwIjoxNzU0OTM3NzI5fQ.mRQA6wOnZ4eexH94MzAKR2r-VRqhz3_GKnXeMCs2_zY', 'token': 'eyJraWQiOiJzdG9yYWdlLXVybC1zaWduaW5nLWtleV8wNDg3ODljNy1mYmQ1LTQ4OWQtYjVmNC03NjM1NWFhMDRhODYiLCJhbGciOiJIUzI1NiJ9.eyJvd25lciI6IjFlMmQ2MTkwLTVkNTItNGY0OC05NzRjLTdhNWE0M2E1MGJmMyIsInVybCI6ImltYWdlcy8xZTJkNjE5MC01ZDUyLTRmNDgtOTc0Yy03YTVhNDNhNTBiZjMvMzZiZDU0M2EtOTc4NS00OTQwLWFlNTYtY2U0N2Q1ZTFkNmMzLmpwZyIsInVwc2VydCI6ZmFsc2UsImlhdCI6MTc1NDkzMDUyOSwiZXhwIjoxNzU0OTM3NzI5fQ.mRQA6wOnZ4eexH94MzAKR2r-VRqhz3_GKnXeMCs2_zY', 'path': '1e2d6190-5d52-4f48-974c-7a5a43a50bf3/36bd543a-9785-4940-ae56-ce47d5e1d6c3.jpg'}
2025-08-11 17:42:09,062 - app.services.db.image_service - INFO - Successfully created upload URL
2025-08-11 17:42:09,062 - app.services.db.image_service - INFO - Returning response: {'image_id': '065ac9dc-8359-4009-b6c4-4146be6adf76', 'upload_url': 'https://sfniyudipwsaqwuhsdcq.supabase.co/storage/v1/object/upload/sign/images/1e2d6190-5d52-4f48-974c-7a5a43a50bf3/36bd543a-9785-4940-ae56-ce47d5e1d6c3.jpg?token=eyJraWQiOiJzdG9yYWdlLXVybC1zaWduaW5nLWtleV8wNDg3ODljNy1mYmQ1LTQ4OWQtYjVmNC03NjM1NWFhMDRhODYiLCJhbGciOiJIUzI1NiJ9.eyJvd25lciI6IjFlMmQ2MTkwLTVkNTItNGY0OC05NzRjLTdhNWE0M2E1MGJmMyIsInVybCI6ImltYWdlcy8xZTJkNjE5MC01ZDUyLTRmNDgtOTc0Yy03YTVhNDNhNTBiZjMvMzZiZDU0M2EtOTc4NS00OTQwLWFlNTYtY2U0N2Q1ZTFkNmMzLmpwZyIsInVwc2VydCI6ZmFsc2UsImlhdCI6MTc1NDkzMDUyOSwiZXhwIjoxNzU0OTM3NzI5fQ.mRQA6wOnZ4eexH94MzAKR2r-VRqhz3_GKnXeMCs2_zY', 'file_path': '1e2d6190-5d52-4f48-974c-7a5a43a50bf3/36bd543a-9785-4940-ae56-ce47d5e1d6c3.jpg'}
2025-08-11 17:42:09,064 - app.main - INFO - Response status: 200
2025-08-11 17:42:09,064 - app.main - INFO - Request: GET /api/dashboard
2025-08-11 17:42:09,066 - app.main - INFO - Response status: 200
2025-08-11 17:42:10,207 - app.main - INFO - Request: GET /images/065ac9dc-8359-4009-b6c4-4146be6adf76/url
2025-08-11 17:42:10,209 - app.api.endpoints.images - INFO - API request to get image URL: 065ac9dc-8359-4009-b6c4-4146be6adf76
2025-08-11 17:42:10,209 - app.services.db.image_service - INFO - Getting image URL for ID: 065ac9dc-8359-4009-b6c4-4146be6adf76
2025-08-11 17:42:10,517 - app.services.db.base_service - ERROR - Error in get_image_url: Cannot find publicUrl in response
2025-08-11 17:42:10,517 - app.main - INFO - Response status: 200
2025-08-11 17:42:41,316 - app.main - INFO - Request: GET /api/dashboard
2025-08-11 17:42:41,321 - app.main - INFO - Response status: 200
2025-08-11 17:42:41,324 - app.main - INFO - Request: GET /db/user-profile
2025-08-11 17:42:41,325 - app.main - INFO - Request: GET /db/exercise-definitions
2025-08-11 17:42:41,326 - app.api.endpoints.db - INFO - API request to get profile for user: 1e2d6190-5d52-4f48-974c-7a5a43a50bf3
2025-08-11 17:42:41,326 - app.services.db.user_profile_service - INFO - Getting profile for user: 1e2d6190-5d52-4f48-974c-7a5a43a50bf3
2025-08-11 17:42:41,591 - app.services.db.user_profile_service - INFO - Successfully retrieved profile for user: 1e2d6190-5d52-4f48-974c-7a5a43a50bf3
2025-08-11 17:42:41,593 - app.services.db.exercise_definition_service - INFO - Fetching all exercise definitions
2025-08-11 17:42:41,891 - app.services.db.exercise_definition_service - INFO - Fetched 167 exercise definitions
2025-08-11 17:42:41,905 - app.main - INFO - Response status: 200
2025-08-11 17:42:41,906 - app.main - INFO - Response status: 200
2025-08-11 17:42:42,230 - app.main - INFO - Request: GET /db/workouts/user
2025-08-11 17:42:42,232 - app.api.endpoints.db - INFO - API request to get all workouts for user: 1e2d6190-5d52-4f48-974c-7a5a43a50bf3
2025-08-11 17:42:42,232 - app.services.db.workout_service - INFO - Getting all workouts for user: <app.core.supabase.auth.get_current_user.<locals>.User object at 0x119302ba0>
2025-08-11 17:42:42,519 - app.services.db.workout_service - INFO - Retrieved 46 workouts for user: <app.core.supabase.auth.get_current_user.<locals>.User object at 0x119302ba0>
2025-08-11 17:42:42,530 - app.main - INFO - Response status: 200
